--- 
id: 1568
name: Paso 0 - Datos de la Solicitud
label: Datos de la Solicitud
description: Ingrese los Datos de la Solicitud y los Datos Generales del Proyecto
fill_step_id: 770
created_at: 2014-01-20 16:31:22 Z
updated_at: 2014-01-20 16:31:22 Z
include: "{\"3422\":{\"2028\":{\"2076\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3463\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2078\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"3423\":{\"2026\":{\"2079\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"3425\":{\"1791\":{\"1655\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3350\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"3427\":{\"1786\":{\"1632\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1633\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3352\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"3431\":{\"2029\":{\"2083\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2084\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2085\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3462\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"3432\":{\"2380\":{\"2086\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2087\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"3433\":{\"1786\":{\"1632\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1633\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3352\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"3436\":{\"2485\":{\"365\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3102\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3103\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"3448\":{\"2045\":{\"2127\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"3449\":{\"2493\":{\"1401\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"1402\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"3450\":{\"2585\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2586\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2587\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2590\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2591\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2599\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2600\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2601\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2602\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2603\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2604\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2605\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2606\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2607\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2608\":{\"3114\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2920\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"3451\":{\"2493\":{\"1401\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"1402\":{\"views\":\"default\",\"enabled\":\"disabled\"}}}}"
allowed_next_to_steps: ""
allowed_back_to_steps: ""
controls: ,next,close,close_and_save,save
on_becoming: "#Datos del Solicitante Natural\r\n\
  if @owner[\"kind_of_user_type\"] == \"NaturalPerson\"\r\n\
  \tif @owner[\"natural_person_type\"]==\"national_citizen\"\r\n\
  \t\tform_data.set(\"datos_del_solicitante_persona_natural.nombres_completos.cedula_pasaporte\",@owner[\"national_id\"])\r\n\
  \tform_data.set(\"datos_del_solicitante.datos_del_solicitante.tipo_de_identificacion\",\"C\xC3\xA9dula\")\r\n\
  \tform_data.set(\"datos_del_solicitante.datos_del_solicitante.numero_de_identificacion\",@owner[\"national_id\"])\r\n\
  \telse\r\n\
  \t\tform_data.set(\"datos_del_solicitante_persona_natural.nombres_completos.cedula_pasaporte\",@owner[\"passport\"])\r\n\
  \tform_data.set(\"datos_del_solicitante.datos_del_solicitante.tipo_de_identificacion\",\"Pasaporte\")\r\n\
  \tform_data.set(\"datos_del_solicitante.datos_del_solicitante.numero_de_identificacion\",@owner[\"passport\"])\r\n\
  \tend\r\n\
  \tform_data.set(\"datos_del_solicitante_persona_natural.nombres_completos.primer_nombre\",@owner[\"first_name\"])\r\n\
  \tform_data.set(\"datos_del_solicitante_persona_natural.nombres_completos.segundo_nombre\",@owner[\"second_name\"])\r\n\
  \tform_data.set(\"datos_del_solicitante_persona_natural.nombres_completos.primer_apellido\",@owner[\"last_name\"])\r\n\
  \tform_data.set(\"datos_del_solicitante_persona_natural.nombres_completos.segundo_apellido\",@owner[\"second_last_name\"])\r\n\
  \tform_data.set(\"datos_del_solicitante_persona_natural.nombres_completos.apellido_de_casada\",@owner[\"married_name\"])\r\n\
  \tform_data.set(\"datos_del_solicitante_persona_natural.nombres_completos.telefono\",@owner[\"fixed_number\"])\r\n\
  \tform_data.set(\"datos_del_solicitante_persona_natural.nombres_completos.email\",@owner[\"email\"])\r\n\
  \r\n\
  \t#Usado para print design\r\n\
  \tnombre_completo= \"#{@owner[\"first_name\"]} \"+\"#{@owner[\"second_name\"]} \"+\"#{@owner[\"last_name\"]} \"+\"#{@owner[\"second_last_name\"]} \"+\"#{@owner[\"married_name\"]}\"\r\n\
  \tform_data.set(\"datos_del_solicitante_persona_natural.nombres_completos.nombre\",nombre_completo)\r\n\
  \t\r\n\
  \t#Para Fillstep de Contraparte\r\n\
  \tform_data.set(\"datos_del_solicitante.datos_del_solicitante.nombre\",nombre_completo)\r\n\
  end\r\n\
  \r\n\
  #Datos del Solicitante Jur\xC3\xADdico -- RP\r\n\
  form_data.set(\"datos_del_solicitante_persona_juridica.nombres_completos.ruc\",@owner[\"tax_id\"])\r\n\
  \r\n\
  #Seteo para que se vea secci\xC3\xB3n de pago\r\n\
  \r\n\
  form_data.set(\"datos_de_pago.pago_manual_confirmado.pago_manual_confirmado\", \"S\xC3\xAD\")\r\n\
  \r\n\
  \r\n\
  \r\n\
  #Nombres de entidades AV\r\n\
  dat = @application[\"id\"].to_s\r\n\
  result = WebserviceConsumer.get('/preconfigured_services/get_application_config.json?id='+dat).parsed_response\r\n\
  entidades=[]\r\n\
  result[\"response\"][\"EntidadesEvaluadorasProceso4\"].each do |le| \r\n\
  \tentidades<<le.last[\"evaluacion_de_la_entidad\"]\r\n\
  end\r\n\
  \r\n\
  15.times do |i| \r\n if entidades && entidades[i]\r\n  _nombre = entidades[i][\"entidad\"]\r\n  \r\n  form_data.set(\"entidad_evaluadora.entidad_evaluadora_#{i}.nombre_de_la_entidad\", _nombre)\r\n\
  \r\n end\r\n\
  end"
on_transition: "#Datos del Solicitante Jur\xC3\xADdico -- RP\r\n\
  if \t@owner[\"kind_of_user_type\"] == \"JuridicalPerson\"\r\n    _ruc = @owner[\"tax_id\"]\r\n    _ti_so = form_data.get(\"datos_del_solicitante_persona_juridica.nombres_completos.tipo_sociedad\")\r\n    result = WebserviceConsumer.get('/service/bdin_registro_publico_ruc/find.json?ruc=' + _ruc + '&tipo_sociedad=' + _ti_so).parsed_response\r\n    _solicitante = result[\"response\"]\r\n    \r\n\
  \tform_data.set(\"datos_del_solicitante_persona_juridica.nombres_completos.ruc\",_ruc)\r\n\
  \tform_data.set(\"datos_del_solicitante_persona_juridica.nombres_completos.nombre\",_solicitante[\"nombre_empresa\"])\r\n\
  \tform_data.set(\"datos_del_solicitante_persona_juridica.nombres_completos.telefono\",_solicitante[\"tlf_movil\"])\r\n\
  \tform_data.set(\"datos_del_solicitante_persona_juridica.nombres_completos.email\",_solicitante[\"email\"])\r\n\
  \t\r\n\
  \t#Para Fillstep de Contraparte\r\n\
  \tform_data.set(\"datos_del_solicitante.datos_del_solicitante.tipo_de_identificacion\",\"RUC\")\r\n\
  \tform_data.set(\"datos_del_solicitante.datos_del_solicitante.numero_de_identificacion\",_ruc)\r\n\
  \tform_data.set(\"datos_del_solicitante.datos_del_solicitante.nombre\",_solicitante[\"nombre_empresa\"])\r\n\
  \t\r\n\
  end\r\n\
  \r\n\
  #Datos del Co-Solicitante/////////////////////////////////////////////////\r\n\
  #Co-solicitante v\xC3\xADa usuarios del sistema\r\n\
  tipo = form_data.get(\"tipo_de_solicitante.tipo_de_solicitante.tipo_de_solicitante\")\r\n\
  #Co solicitante requerido\r\n\
  if tipo == \"Arquitecto Tramitador\"\r\n\
  \tform_data.set(\"requiere_contraparte.datos_contraparte.requierecontraparte\",\"S\xC3\xAD\")\r\n\
  \tnro_documento = form_data.get(\"tipo_de_documento_co_solicitante.tipo_de_documento.no_documento\").strip\r\n\
  \tdocumento_contraparte = form_data.get(\"tipo_de_documento_co_solicitante.tipo_de_documento.tipo_de_documento\")\r\n\
  \tform_data.set(\"requiere_contraparte.datos_contraparte.tipo_de_documento\",documento_contraparte)\r\n\
  \tform_data.set(\"requiere_contraparte.datos_contraparte.documento\",nro_documento)\r\n\
  \t\r\n\
  \t#Error si no introdujo el n\xC3\xBAmero de identificaci\xC3\xB3n\r\n\
  \tif nro_documento.blank?\r\n\
  \t\ttransition_errors << \"El solicitante indic\xC3\xB3 que es Arquitecto, por lo tanto un Co-solicitante es obligatorio, por favor ingrese la informaci\xC3\xB3n requerida. \"\r\n\
  \telse\r\n\
  \t\tresult = WebserviceConsumer.get( '/preconfigured_services/get_user_info.json?identification_user=' + \"#{nro_documento}\").parsed_response\r\n\
  \t\tif result[\"response\"][\"person_id\"].nil? \r\n\
  \t\t\tform_data.set(\"tipo_de_documento_co_solicitante.tipo_de_documento.no_documento\",\"\")\r\n\
  \t\t\ttransition_errors << \"Los datos del Co-solicitante no fueron encontrados, por favor verifique. \"\r\n\
  \t\telse\r\n\
  \t\t\t#Datos del co-solicitante por formulario\r\n\
  \t\t\tform_data.set(\"tipo_de_co_solicitante.tipo_de_co_solicitante.tipo_de_co_solicitante\",\"Promotor\")\r\n\
  \t\t\ttipo_cosolicitante = form_data.get(\"tipo_de_documento_co_solicitante.tipo_de_documento.tipo_de_documento\")\r\n\
  \t\t\tnro_documento = form_data.get(\"tipo_de_documento_co_solicitante.tipo_de_documento.no_documento\").strip\r\n\
  \t\t\tif tipo_cosolicitante == \"C\xC3\xA9dula\"\r\n\
  \t\t\t\tform_data.set(\"datos_del_co_solicitante_persona_natural.nombres_completos.tipo_de_identificacion\",tipo_cosolicitante)\r\n\
  \t\t\t\tresult = WebserviceConsumer.get( '/service/bdin_tribunal_electoral/find.json?cedula=' + \"#{nro_documento}\").parsed_response\r\n\
  \t\t\tend\r\n\
  \t\t\tif tipo_cosolicitante == \"Pasaporte\"\r\n\
  \t\t\t\tform_data.set(\"datos_del_co_solicitante_persona_natural.nombres_completos.tipo_de_identificacion\",tipo_cosolicitante)\r\n\
  \t\t\t\tform_data.set(\"datos_del_co_solicitante_persona_natural.nombres_completos.cedula_pasaporte\",nro_documento)\r\n\
  \t\t\tend\r\n\
  #RP\r\n\
  \t\t\tif tipo_cosolicitante ==  \"RUC\"\r\n\
  \t\t\t\tform_data.set(\"datos_del_co_solicitante_persona_juridica.nombres_completos.tipo_de_identificacion\",tipo_cosolicitante)\r\n\
  \t\t\t\tform_data.set(\"datos_del_co_solicitante_persona_juridica.nombres_completos.ruc\",nro_documento)\r\n                _ti_so = form_data.get(\"tipo_de_documento_co_solicitante.tipo_de_documento.tipo_sociedad\")\r\n\
  \t\t\t\tresult = WebserviceConsumer.get('/service/bdin_registro_publico_ruc/find.json?ruc=' + nro_documento + '&tipo_sociedad=' + _ti_so).parsed_response\r\n\
  \t\t\tend\r\n\
  \t\t\tcosolicitante = result[\"response\"]\r\n\
  \t\t\tif cosolicitante.nil? \r\n\
  \t\t\t\tform_data.set(\"tipo_de_documento_co_solicitante.tipo_de_documento.no_documento\",\"\")\r\n\
  \t\t\t\ttransition_errors << \"Los datos del Co-solicitante no fueron encontrados, por favor verifique. \"\r\n\
  \t\t\telse\r\n\
  \t\t\t\t#form_data.set(\"requiere_contraparte.datos_contraparte.email\",cosolicitante[\"email\"])\r\n\
  \t\r\n\
  \t\t\t\tif tipo_cosolicitante == \"C\xC3\xA9dula\" \r\n\
  \t\t\t\t\t#Co-Solicitante NATURAL\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_co_solicitante_persona_natural.nombres_completos.cedula_pasaporte\",nro_documento)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_co_solicitante_persona_natural.nombres_completos.primer_nombre\",cosolicitante[\"primerNombre\"])\r\n\
  \t\t\t\t#\tform_data.set(\"datos_del_co_solicitante_persona_natural.nombres_completos.segundo_nombre\",cosolicitante[\"segundoNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_co_solicitante_persona_natural.nombres_completos.primer_apellido\",cosolicitante[\"primerApellido\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_co_solicitante_persona_natural.nombres_completos.segundo_apellido\",cosolicitante[\"segundoApellido\"])\r\n\
  \t\t\t\t#\tform_data.set(\"datos_del_co_solicitante_persona_natural.nombres_completos.apellido_de_casada\",cosolicitante[\"apellidoCasada\"])\r\n\
  \t\t\t\t#\tform_data.set(\"datos_del_co_solicitante_persona_natural.nombres_completos.telefono\",cosolicitante[\"tlfLocal\"])\r\n\
  \t\t\t\t#\tform_data.set(\"datos_del_co_solicitante_persona_natural.nombres_completos.email\",cosolicitante[\"email\"])\r\n                \r\n\
  \t\t\t\t#Usado para print design\r\n\
  \t\t\t\t\tsegundoNombre = form_data.get(\"datos_del_co_solicitante_persona_natural.nombres_completos.segundo_nombre\")\r\n\
  \t\t\t\t\tapellidoCasada = form_data.get(\"datos_del_co_solicitante_persona_natural.nombres_completos.apellido_de_casada\")\r\n\
  \t\t\t\t\t_nombre =  \"#{cosolicitante[\"primerNombre\"]} \"+\"#{segundoNombre} \"+\"#{cosolicitante[\"primerApellido\"]} \"+\"#{cosolicitante[\"segundoApellido\"]} \"+\"#{apellidoCasada}\"\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_co_solicitante_persona_natural.nombres_completos.nombre\",_nombre)\r\n\
  \t\t\t\t\t\r\n\
  \t\t\t\tend\r\n\
  \t\t\t\tif tipo_cosolicitante == \"RUC\" \r\n\
  \t\t\t\t\t#Co-Solicitante Juridico\r\n\
  \t\t\t\t\t#form_data.set(\"datos_del_co_solicitante_persona_juridica.nombres_completos.ruc\",nro_documento)\r\n\
  \t\t\t\t\t#form_data.set(\"datos_del_co_solicitante_persona_juridica.nombres_completos.tipo_de_identificacion\",nro_documento)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_co_solicitante_persona_juridica.nombres_completos.nombre\",cosolicitante[\"nombre_empresa\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_co_solicitante_persona_juridica.nombres_completos.telefono\",cosolicitante[\"tlf_movil\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_co_solicitante_persona_juridica.nombres_completos.Email\",cosolicitante[\"email\"])\r\n\
  \t\t\t\r\n\
  \t\t\t\tend \r\n\
  \t\t\tend\t\t\r\n\
  \t\tend\r\n\
  \tend #if nro_documento.blank?\r\n\
  else\r\n\
  \tform_data.set(\"requiere_contraparte.datos_contraparte.requierecontraparte\",\"No\")\t\r\n\
  end\r\n  \r\n\
  \r\n\
  #Datos del Responsable del Dise\xC3\xB1o///////////////////////////////////////////////// Hacer lo mismo  en co-solicitante\r\n\
  tipo_responsable = form_data.get(\"tipo_de_documento_responsable_diseno.tipo_de_documento.tipo_de_documento\")\r\n\
  nro_documento = form_data.get(\"tipo_de_documento_responsable_diseno.tipo_de_documento.no_documento\").strip\r\n\
  if tipo_responsable == \"C\xC3\xA9dula\"\r\n\
  \tform_data.set(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.tipo_de_identificacion\",tipo_responsable)\r\n\
  \tresult = WebserviceConsumer.get( '/service/bdin_tribunal_electoral/find.json?cedula=' + \"#{nro_documento}\").parsed_response\r\n\
  end\r\n\
  if tipo_responsable == \"Pasaporte\"\r\n\
  \tform_data.set(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.tipo_de_identificacion\",tipo_responsable)\r\n\
  \tform_data.set(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.cedula_pasaporte\",nro_documento)\r\n\
  end\r\n\
  if tipo_responsable ==  \"RUC\"\r\n\
  \tform_data.set(\"datos_del_responsable_del_diseno_persona_juridica.nombres_completos.tipo_de_identificacion\",tipo_responsable)\r\n\
  \tform_data.set(\"datos_del_responsable_del_diseno_persona_juridica.nombres_completos.ruc\",nro_documento)\r\n\
  \t _ti_so = form_data.get(\"tipo_de_documento_responsable_diseno.tipo_de_documento.tipo_sociedad\")\r\n\
  \tresult = WebserviceConsumer.get('/service/bdin_registro_publico_ruc/find.json?ruc=' + nro_documento + '&tipo_sociedad=' + _ti_so).parsed_response\r\n\
  end\r\n\
  responsable = result[\"response\"]\r\n\
  if responsable.nil? \r\n\
  \tform_data.set(\"tipo_de_documento_responsable_diseno.tipo_de_documento.no_documento\",\"\")\r\n\
  \ttransition_errors << \"Los datos del responsable del dise\xC3\xB1o no fueron encontrados, por favor verifique. \"\r\n\
  else\r\n\
  \tif tipo_responsable == \"C\xC3\xA9dula\" \r\n\
  \t\t#Responsable NATURAL\r\n\
  \t\tform_data.set(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.cedula_pasaporte\",nro_documento)\r\n\
  \t\tform_data.set(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.primer_nombre\",responsable[\"primerNombre\"])\r\n\
  \t\t#form_data.set(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.segundo_nombre\",responsable[\"segundoNombre\"])\r\n\
  \t\tform_data.set(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.primer_apellido\",responsable[\"primerApellido\"])\r\n\
  \t\tform_data.set(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.segundo_apellido\",responsable[\"segundoApellido\"])\r\n\
  \t\t#form_data.set(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.apellido_de_casada\",responsable[\"apellidoCasada\"])\r\n\
  \t\t#form_data.set(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.telefono\",responsable[\"tlfLocal\"])\r\n\
  \t\t#form_data.set(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.email\",responsable[\"email\"])\r\n\
  \r\n\
  \t\t#Usado para print design\r\n\
  \t\tsegundoNombre1 = form_data.get(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.segundo_nombre\")\r\n\
  \t\tapellidoCasada1 = form_data.get(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.apellido_de_casada\")\r\n\
  \t\t_nombre =  \"#{responsable[\"primerNombre\"]} \"+\"#{segundoNombre1} \"+\"#{responsable[\"primerApellido\"]} \"+\"#{responsable[\"segundoApellido\"]} \"+\"#{apellidoCasada1}\"\r\n\
  \t\tform_data.set(\"datos_del_responsable_del_diseno_persona_natural.nombres_completos.nombre\",_nombre)\r\n\
  \tend\r\n\
  \t\r\n\
  \tif tipo_responsable == \"RUC\" \r\n\
  \t\t#Responsable JURIDICO\r\n\
  \t\tform_data.set(\"datos_del_responsable_del_diseno_persona_juridica.nombres_completos.ruc\",nro_documento)\r\n\
  \t\tform_data.set(\"datos_del_responsable_del_diseno_persona_juridica.nombres_completos.nombre\",responsable[\"nombre_empresa\"])\t\t\r\n\
  \t\tform_data.set(\"datos_del_responsable_del_diseno_persona_juridica.nombres_completos.telefono\",responsable[\"tlf_movil\"])\r\n\
  \tend\r\n\
  \t\r\n\
  end\t\r\n\
  \r\n\
  \r\n\
  \r\n\
  #FINCA/////////////////////////////////////////////////\r\n\
  nro_finca = form_data.get(\"datos_de_la_finca.datos_de_finca.numero_de_finca\").strip\r\n\
  cod_ubi = form_data.get(\"datos_de_la_finca.datos_de_finca.cod_ubicacion\")\r\n\
  tipo_p = form_data.get(\"datos_de_la_finca.datos_de_finca.tipo_propiedad\")\r\n\
  \r\n\
  result = WebserviceConsumer.get(URI.escape('/service/bdin_registro_publico_tupea/where.json?finca=' + \"#{nro_finca}\" + '&codUbicacion=' + \"#{cod_ubi}\" + '&tipoPropiedad=' + \"#{tipo_p}\")).parsed_response\r\n\
  #result = WebserviceConsumer.get('/service/bdin_registro_publico_tupea/find.json?finca=' + \"#{nro_finca}\").parsed_response\r\n\
  finca = result[\"response\"][0]\r\n\
  if finca.nil?\r\n\
  \tform_data.set(\"datos_de_la_finca.datos_de_finca.numero_de_finca\",\"\")\r\n\
  \tform_data.set(\"datos_de_la_finca.datos_de_finca.cod_ubicacion\",\"\")\r\n\
  \tform_data.set(\"datos_de_la_finca.datos_de_finca.tipo_propiedad\",\"\")\r\n\
  \ttransition_errors << \"Los datos de la finca (Finca, Codigo de Ubucacion y Tipo de Propiedad) no fueron encontrados, por favor verifique. \"\r\n\
  else\r\n\
  \t#Informaci\xC3\xB3n de la Finca\r\n\
  \tform_data.set(\"datos_de_la_finca.datos_de_finca.tomo\",finca[\"rollo-tomo\"])\r\n\
  \tform_data.set(\"datos_de_la_finca.datos_de_finca.tipo_de_propiedad_tex\",finca[\"tipoPropiedad\"])\r\n\
  \tform_data.set(\"datos_de_la_finca.datos_de_finca.numero_de_plano\",finca[\"nro_plano\"])\r\n\
  \tform_data.set(\"datos_de_la_finca.datos_de_finca.valor_de_la_finca\",finca[\"valor_finca\"])\r\n\
  \tform_data.set(\"datos_de_la_finca.datos_de_finca.superficie\",finca[\"superficie\"])\r\n\
  \t#form_data.set(\"datos_de_la_finca.datos_de_finca.linderos_y_medidas\",finca[\"linderos_medidas\"])\r\n\
  \t\r\n\
  \t#form_data.set(\"datos_de_la_finca.datos_de_ubicacion_de_la_finca.provincia\",finca[\"provincia\"])\r\n\
  \t#form_data.set(\"datos_de_la_finca.datos_de_ubicacion_de_la_finca.distrito\",finca[\"distrito\"])\r\n\
  \t#form_data.set(\"datos_de_la_finca.datos_de_ubicacion_de_la_finca.corregimiento\",finca[\"corregimiento\"])\r\n\
  \r\n\
  # Carga de tabla de Propietarios de finca\r\n\
  propietarios = WebserviceConsumer.get( '/service/bdin_propietarios_finca/records.json').parsed_response\r\n\
  propietarios = propietarios[\"response\"]\r\n\
  \r\n\
  _dataPropietarios = { 'config' => {\r\n            \"readonly\" => \"true\",\r\n           },\r\n         'data' => propietarios,\r\n         'citizen_selection' => [],\r\n         'agent_selection' => []\r\n\
  }\r\n\
  \r\n\
  _dataPropietarios = ActiveSupport::JSON.encode(_dataPropietarios)\r\n\
  form_data.set(\"datos_de_la_finca.propietarios.fieldgrid\", _dataPropietarios)\r\n\
  \r\n\
  # Carga de tabla de Gravamenes de finca\r\n\
  gravamenes = WebserviceConsumer.get( '/service/bdin_gravamenes_finca/records.json').parsed_response\r\n\
  gravamenes = gravamenes[\"response\"]\r\n\
  \r\n\
  _dataGrav = { 'config' => {\r\n            \"readonly\" => \"true\",\r\n           },\r\n         'data' => gravamenes,\r\n         'citizen_selection' => [],\r\n         'agent_selection' => []\r\n\
  }\r\n\
  \r\n\
  _dataGrav = ActiveSupport::JSON.encode(_dataGrav)\r\n\
  form_data.set(\"datos_de_la_finca.gravamenes.fieldgrid\", _dataGrav)\r\n\
  \t\t\r\n\
  \r\n\
  end\r\n\
  \r\n\
  \r\n\
  ##############Validacion de carga de solicitud#####################\r\n\
  \r\n\
  \r\n\
  _error = nil\r\n\
  _p1 = form_data.get(\"datos_de_aprobacion_de_solicitud.datos_de_solicitud_de_aprobacion.aprobacion_re_aprobacion\")\r\n\
  _d1 = form_data.get(\"datos_de_aprobacion_de_solicitud.datos_de_solicitud_de_aprobacion.tramite_aprobacion_previo\")\r\n\
  \r\n\
  \r\n\
  _error = (_p1==\"Re-aprobaci\xC3\xB3n\" and _d1.blank?)? \"#{_error}\": _error\r\n\
  \r\n\
  if !_error.nil?\t\r\n\
  \ttransition_errors << \"Al marcar la opcion de Re-aprobaci\xC3\xB3n debe seleccionar un Tr\xC3\xA1mite Aprobaci\xC3\xB3n Previo\" + \"#{_error}\"\r\n\
  end\r\n\
  \r\n\
  \r\n\
  #####Validacion Ruc\r\n\
  ##Responsable del dse\xC3\xB1o\r\n\
  _error = nil\r\n\
  _r1 = form_data.get(\"tipo_de_documento_responsable_diseno.tipo_de_documento.tipo_de_documento\")\r\n\
  _r2 = form_data.get(\"tipo_de_documento_responsable_diseno.tipo_de_documento.tipo_sociedad\")\r\n\
  \r\n\
  \r\n\
  _error = (_r1==\"RUC\" and _r2.blank?)? \"#{_error}\": _error\r\n\
  \r\n\
  if !_error.nil?\t\r\n\
  \ttransition_errors << \"Al marcar la opcion de Tipo de Documento igual a RUC debe seleccionar el Tipo de Sociedad\" + \"#{_error}\"\r\n\
  end\r\n\
  \r\n\
  \r\n\
  ##Co-solicitante\r\n\
  _c1 = form_data.get(\"tipo_de_documento_co_solicitante.tipo_de_documento.tipo_de_documento\")\r\n\
  _c2 = form_data.get(\"tipo_de_documento_co_solicitante.tipo_de_documento.tipo_sociedad\")\r\n\
  \r\n\
  _error = (_c1==\"RUC\" and _c2.blank?)? \"#{_error}\": _error\r\n\
  \r\n\
  if !_error.nil?\t\r\n\
  \ttransition_errors << \"Al marcar la opcion de Tipo de Documento igual a RUC debe seleccionar el Tipo de Sociedad\" + \"#{_error}\"\r\n\
  end\r\n"
views: 
back_step: ""
next_step: Paso 1 - Datos del Solicitante y del Co-Solicitante
position: 0
ajax_calls: "$(document).ready(function(){\r\n  $(\"#field_tipo_de_documento_co_solicitante_tipo_de_documento_tipo_de_documento\").change(function(){\r\n   dato = $(this).val();\r\n   if(dato == 'C\xC3\xA9dula' || dato == 'Pasaporte'){\r\n \r\n    $(\"#field_tipo_de_documento_co_solicitante_tipo_de_documento_no_documento\").val('');\r\n    $(\"#field_tipo_de_documento_co_solicitante_tipo_de_documento_tipo_sociedad\").val('');\r\n    $(\"#field_tipo_de_documento_co_solicitante_tipo_de_documento_tipo_sociedad\").attr(\"disabled\",\"disabled\");\r\n   }\r\n   else {\r\n    $(\"#field_tipo_de_documento_co_solicitante_tipo_de_documento_no_documento\").val('');\r\n    $(\"#field_tipo_de_documento_co_solicitante_tipo_de_documento_tipo_sociedad\").removeAttr(\"disabled\",\"disabled\");\r\n   }\r\n  });\r\n   });\r\n\
  \r\n\
  \r\n\
  \r\n\
  \r\n   $(document).ready(function(){\r\n  $(\"#field_tipo_de_documento_responsable_diseno_tipo_de_documento_tipo_de_documento\").change(function(){\r\n   dato = $(this).val();\r\n   if(dato == 'C\xC3\xA9dula' || dato == 'Pasaporte'){\r\n \r\n    $(\"#field_tipo_de_documento_responsable_diseno_tipo_de_documento_no_documento\").val('');\r\n    $(\"#field_tipo_de_documento_responsable_diseno_tipo_de_documento_tipo_sociedad\").val('');\r\n    $(\"#field_tipo_de_documento_responsable_diseno_tipo_de_documento_tipo_sociedad\").attr(\"disabled\",\"disabled\");\r\n   }\r\n   else {\r\n    $(\"#field_tipo_de_documento_responsable_diseno_tipo_de_documento_no_documento\").val('');\r\n    $(\"#field_tipo_de_documento_responsable_diseno_tipo_de_documento_tipo_sociedad\").removeAttr(\"disabled\",\"disabled\");\r\n   }\r\n  });\r\n   });"
