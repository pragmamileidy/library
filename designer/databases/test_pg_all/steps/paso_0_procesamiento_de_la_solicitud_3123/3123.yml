--- 
id: 3123
name: Paso 0 - Procesamiento de la Solicitud
label: "Revisi\xC3\xB3n T\xC3\xA9cnica"
description: "Revisi\xC3\xB3n T\xC3\xA9cnica"
fill_step_id: 1669
created_at: 2015-04-07 13:23:29 Z
updated_at: 2015-11-11 16:04:12.291664 Z
include: "{\"4791\":{\"2198\":{\"2371\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2372\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2373\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2374\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2375\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2376\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"4792\":{\"2173\":{\"3124\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2380\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2381\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2382\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2383\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3182\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3183\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3204\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2174\":{\"954\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"955\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"956\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"957\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"958\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"4793\":{\"2544\":{\"3124\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2380\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2381\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2418\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2382\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2383\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3182\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3204\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3192\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"4794\":{\"2189\":{\"3078\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2387\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2388\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2389\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2390\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2391\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2392\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2190\":{\"954\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"955\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"956\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"957\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"958\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"4795\":{\"2197\":{\"2393\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2394\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2395\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2396\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2397\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3450\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2398\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2400\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2401\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"4796\":{\"2485\":{\"365\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3919\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3102\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3103\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"367\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"366\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2089\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2090\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3375\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2486\":{\"3104\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3105\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3106\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2488\":{\"2845\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2846\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2847\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2848\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2792\":{\"3209\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2791\":{\"3209\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"4797\":{\"2380\":{\"3194\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3451\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"4799\":{\"3022\":{\"3515\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3516\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3023\":{\"3517\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3518\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3024\":{\"3519\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3520\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3025\":{\"3521\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3522\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3026\":{\"3523\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3524\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3027\":{\"3525\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3526\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3028\":{\"3527\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3528\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3029\":{\"3529\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3530\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3030\":{\"3531\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3532\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3031\":{\"3533\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3534\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3033\":{\"3537\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3538\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"4802\":{\"2570\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2571\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2572\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2573\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2574\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2575\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2576\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2577\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2578\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2579\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2580\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2581\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2582\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2583\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2584\":{\"2907\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2908\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2909\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2914\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"4804\":{\"2549\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2550\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2551\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2552\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2553\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2554\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2555\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2558\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2559\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2560\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2561\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2562\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2563\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2564\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2565\":{\"3101\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2851\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2852\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2850\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"2853\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2854\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"4806\":{\"2940\":{\"3454\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3455\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"4810\":{\"2940\":{\"3454\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3455\":{\"views\":\"default\",\"enabled\":\"disabled\"}}}}"
allowed_next_to_steps: ""
allowed_back_to_steps: ""
controls: ,close,close_and_save,save,submit
on_becoming: "#Nombres de entidades AV\r\n\
  _app_id = @application[\"id\"].to_s\r\n\
  result_entidades = WebserviceConsumer.get(\"/preconfigured_services/get_application_config.json?id=#{_app_id}\").parsed_response\r\n\
  entidades=[]\r\n\
  result_entidades[\"response\"][\"EntidadesEvaluadoras\"].each do |key, entidad_data|\r\n\
  \tnext unless key =~ /entidades_instance/ \r\n\
  \tentidades << entidad_data[\"evaluacion_de_la_entidad\"]  \r\n\
  end\r\n\
  \r\n\
  # Inicializacion de datos del agente - LG\r\n\
  _idagente = @task[\"agent_id\"].to_s\r\n\
  result = WebserviceConsumer.get( \"/preconfigured_services/get_user_info.xml?agent_id=#{_idagente}&include_all=true\").parsed_response\r\n\
  _agente = result[\"hash\"][\"response\"]\r\n\
  _siglas = @task.name.split(' ').last.upcase rescue \"\"\r\n\
  fecha_inicio = Date.today\r\n\
  \r\n\
  entidades.each_index do |i|\r\n\
  \t##### SE ASIGNA EL NOMBRE DEL FUNCIONARIO QUE REALIZA LA REVISI\xC3\x93N POR CADA ENTIDAD EVALUADORA SELECCIONADA #####\r\n\
  \tif entidades[i] && (entidades[i][\"siglas\"].to_s.upcase == _siglas)\r\n\
  \r\n\
  \t\t# Inicializacion de datos del agente - LG\r\n\
  \t\tform_data.set(\"entidad_evaluadora_revisiones.entidad_evaluadora_#{i}.usuario\", _agente[\"name\"])\r\n\
  \t\t####Fechas\r\n\
  \t\tform_data.set(\"entidad_evaluadora_revisiones.entidad_evaluadora_#{i}.fecha_de_evaluacion\", fecha_inicio)\r\n\
  \tend\r\n\
  end"
on_transition: "_app_id = @application[\"id\"].to_s\r\n\
  result = WebserviceConsumer.get(\"/preconfigured_services/get_application_config.json?id=#{_app_id}\").parsed_response\r\n\
  entidades=[]\r\n\
  result[\"response\"][\"EntidadesEvaluadoras\"].each do |key, entidad_data|\r\n\
  \tnext unless key =~ /entidades_instance/ \r\n\
  \tentidades << entidad_data[\"evaluacion_de_la_entidad\"]\r\n\
  end\r\n\
  \r\n\
  seleccion = form_data.get(\"asignacion_de_entidades.entidad_evaluadora.entidad_evaluadora_check\")\r\n\
  seleccion = JSON.parse(seleccion)\r\n\
  \r\n\
  #::: RECORRER LISTA DE ENTIDADES CONFIGURADAS\r\n\
  _sin_obs = \"REALIZ\xC3\x93 REVISI\xC3\x93N. SIN OBSERVACIONES.\"\r\n\
  _no_seleccionada = \"NO FUE REQUERIDA REVISI\xC3\x93N DE ESTA ENTIDAD.\"\r\n\
  entidades.each_index do |i|\r\n\
  \t#::: SI LA ENTIDAD EXISTE (NOMBRE NO ES VACIO)\r\n\
  \tif  (entidades[i][\"entidad\"] != \"\")\r\n\
  \t\t#::: Datos Para Print\r\n\
  \t\tobs = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_#{i}.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  \t\tform_data.set(\"entidad_evaluadora_revisiones.entidad_evaluadora_#{i}.observaciones\",obs)\r\n\
  \t\t#::: SI LA ENTIDAD FUE SELECCIONADA\r\n\
  \t\tif (seleccion.include? entidades[i][\"entidad\"])\r\n\
  \t\t\t#::: SI LA ENTIDAD NO INGRES\xC3\x93 ALGUNA OBSERVACI\xC3\x93N\r\n\
  \t\t\tif (form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_#{i}.observaciones_y_recomendaciones_para_el_solicitante\").blank?)\r\n\
  \t\t\t\t#::: SE ASIGNA MENSAJE\r\n\
  \t\t\t\tform_data.set(\"entidad_evaluadora_revisiones.entidad_evaluadora_#{i}.observaciones\", _sin_obs)\r\n\
  \t\t\tend\r\n\
  \t\telse\r\n\
  \t\t\tif !(form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_#{i}.nombre_de_la_entidad\").blank?)\r\n\
  \t\t\t\t#::: SI LA ENTIDAD NO FUE SELECCIONADA\r\n\
  \t\t\t\tform_data.set(\"entidad_evaluadora_revisiones.entidad_evaluadora_#{i}.observaciones\", _no_seleccionada)\r\n\
  \t\t\tend\r\n\
  \t\tend\r\n\
  \tend\r\n\
  end\r\n\
  \r\n\
  #::: OBSERVACIONES MARTES 17 DE MARZO 2015 ENTIDAD EVALUADORA NO DEBE ENVIAR A REPARO SIN LA OBSERVACION\r\n\
  observacion0 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_0.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion0 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_0.evaluacion_ok_reparo\")\r\n\
  if (evaluacion0 == \"REPARO\" and observacion0.blank? and evaluacion0 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion1 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_1.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion1 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_1.evaluacion_ok_reparo\")\r\n\
  if (evaluacion1 == \"REPARO\" and observacion1.blank? and evaluacion1 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion2 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_2.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion2 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_2.evaluacion_ok_reparo\")\r\n\
  if (evaluacion2 == \"REPARO\" and observacion2.blank? and evaluacion2 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion3 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_3.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion3 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_3.evaluacion_ok_reparo\")\r\n\
  if (evaluacion3 == \"REPARO\" and observacion3.blank? and evaluacion3 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion4 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_4.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion4 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_4.evaluacion_ok_reparo\")\r\n\
  if (evaluacion4 == \"REPARO\" and observacion4.blank? and evaluacion4 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion5 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_5.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion5 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_5.evaluacion_ok_reparo\")\r\n\
  if (evaluacion5 == \"REPARO\" and observacion5.blank? and evaluacion5 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion6 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_6.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion6 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_6.evaluacion_ok_reparo\")\r\n\
  if (evaluacion6 == \"REPARO\" and observacion6.blank? and evaluacion6 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion7= form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_7.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion7= form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_7.evaluacion_ok_reparo\")\r\n\
  if (evaluacion7 == \"REPARO\" and observacion7.blank? and evaluacion7 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion8 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_8.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion8 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_8.evaluacion_ok_reparo\")\r\n\
  if (evaluacion8 == \"REPARO\" and observacion8.blank? and evaluacion8 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion9 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_9.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion9 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_9.evaluacion_ok_reparo\")\r\n\
  if (evaluacion9 == \"REPARO\" and observacion9.blank? and evaluacion9 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion10 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_10.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion10 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_10.evaluacion_ok_reparo\")\r\n\
  if (evaluacion10 == \"REPARO\" and observacion10.blank? and evaluacion10 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion11 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_11.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion11 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_11.evaluacion_ok_reparo\")\r\n\
  if (evaluacion11 == \"REPARO\" and observacion11.blank? and evaluacion11 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion12 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_12.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion12 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_12.evaluacion_ok_reparo\")\r\n\
  if (evaluacion12 == \"REPARO\" and observacion12.blank? and evaluacion12 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion13 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_13.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion13 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_13.evaluacion_ok_reparo\")\r\n\
  if (evaluacion13 == \"REPARO\" and observacion13.blank? and evaluacion13 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end\r\n\
  observacion14 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_14.observaciones_y_recomendaciones_para_el_solicitante\")\r\n\
  evaluacion14 = form_data.get(\"entidad_evaluadora_revisiones.entidad_evaluadora_14.evaluacion_ok_reparo\")\r\n\
  if (evaluacion14 == \"REPARO\" and observacion14.blank? and evaluacion14 != \"OK\")\r\n\
  \ttransition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).Por favor, verifique.\"\r\n\
  end"
views: 
back_step: ""
next_step: ""
position: 0
ajax_calls: "////////////////LP Ocultar Secciones vac\xC3\xADas\r\n\
  \t$(document).ready(function(){\t\t\t\r\n\
  \t\t\t$.each( $('[id*=datos_del_co_participante_]'), function(index, campo) {\r\n\
  \t\t\t\tvar pos = (this.id).match(/_instance_[\\d][\\d]/);\r\n\
  \t\t\t\tif (pos == null){\r\n\
  \t\t\t\t\tpos = (this.id).match(/_instance_[\\d]/);\r\n\
  \t\t\t\t}\t\r\n\
  \t\t\t\tvar productor = \"#field_datos_del_co_participante\";\r\n\
  \t\t\t\tvar mod1 = productor.concat(pos)\r\n\
  \t\t\t\tvar docs = \"_datos_del_co_participante_tipo_de_co_participante_string\";\r\n\
  \t\t\t\tvar documento_d = mod1.concat(docs);\r\n\
  \t\t\t\t\t\tif($(documento_d).val()== ''){\r\n\
  \t\t\t\t\t\t\t$(documento_d).parents(\".section-box\").hide()\r\n\
  \t\t\t\t\t\t}\r\n\
  \t\t\t});\r\n\
  \t});\r\n\
  ///LP ocultar o mostrar campo otro dependiendo de la selecci\xC3\xB3n\r\n\
  \t$(document).ready(function(){\r\n\
  \tdato= $(\"#field_datos_generales_del_proyecto_datos_generales_del_proyecto_uso_de_la_obra\").find(':selected').val();\r\n\
  \t\tif(dato != 'Otros'){\r\n\
  \t\t\t\t$(\"#field_datos_generales_del_proyecto_datos_generales_del_proyecto_otros\").val('');\r\n\
  \t\t\t\t$(\"#field_datos_generales_del_proyecto_datos_generales_del_proyecto_otros\").parent().parent().hide();\r\n\
  \t\t\t}\r\n\
  \t\t\telse{\r\n\
  \t\t\t\t$(\"#field_datos_generales_del_proyecto_datos_generales_del_proyecto_otros\").parent().parent().show();\r\n\
  \t\t\t}\r\n\
  \t  });\r\n\
  \r\n\
  \t\t\r\n\
  \t\t$(document).ready(function(){\r\n\
  \t\t\tdato1= $(\"#field_uso_del_suelo_uso_del_suelo_tipo_de_suelo\").find(':selected').val();\r\n\
  \t\t\tif(dato1 == ' Otro'){\r\n\
  \t\t\t\t\t$(\"#field_uso_del_suelo_uso_del_suelo_otro\").parent().parent().show();\r\n\
  \t\t\t\t}\r\n\
  \t\t\telse{\r\n\
  \t\t\t\t\t$(\"#field_uso_del_suelo_uso_del_suelo_otro\").val('');\r\n\
  \t\t\t\t\t$(\"#field_uso_del_suelo_uso_del_suelo_otro\").parent().parent().hide();\r\n\
  \t\t\t\t}\r\n\
  \t  });\r\n\
  \r\n\
  ////////////////LP Ocultar Secciones vac\xC3\xADas\r\n\
  \t$(document).ready(function(){\t\t\t\r\n\
  \t\t\t$.each( $('[id*=datos_de_la_finca_]'), function(index, campo) {\r\n\
  \t\t\t\tvar pos = (this.id).match(/_instance_[\\d][\\d]/);\r\n\
  \t\t\t\tif (pos == null){\r\n\
  \t\t\t\t\tpos = (this.id).match(/_instance_[\\d]/);\r\n\
  \t\t\t\t}\t\r\n\
  \t\t\t\tvar productor = \"#field_datos_de_la_finca\";\r\n\
  \t\t\t\tvar mod1 = productor.concat(pos)\r\n\
  \t\t\t\tvar docs = \"_datos_de_finca_numero_de_finca\";\r\n\
  \t\t\t\tvar documento_d = mod1.concat(docs);\r\n\
  \t\t\t\t\t\tif($(documento_d).val()== ''){\r\n\
  \t\t\t\t\t\t\t$(documento_d).parents(\".section-box\").hide()\r\n\
  \t\t\t\t\t\t}\r\n\
  \t\t\t});\r\n\
  \t});\r\n\
  \r\n\
  ////LP.....Funci\xC3\xB3n para mostrar u ocultar Campos....////\r\n $(document).ready(function(){\r\n\
  \t////campos ocultos\r\n\
  \tno_plano_original = $('#field_datos_generales_de_la_solicitud_datos_generales_de_la_solicitud_no_del_plano_original');\t\r\n\
  \tno_de_anteproyecto = $('#field_datos_generales_de_la_solicitud_datos_generales_de_la_solicitud_no_de_anteproyecto');\r\n\
  \tfecha_de_aprobacion_de_anteproyecto = $('input[name=\"[field][datos_generales_de_la_solicitud_datos_generales_de_la_solicitud_fecha_de_aprobacion_de_anteproyecto]\"]');\r\n\
  \t////campos de selecci\xC3\xB3n\r\n\
  \ttipo_de_solicitud_municipio = $('#field_datos_generales_de_la_solicitud_datos_generales_de_la_solicitud_tipo_de_solicitud_municipio');\t\t\r\n\
  \ttipo_de_plano = $('#field_datos_generales_de_la_solicitud_datos_generales_de_la_solicitud_tipo_de_plano');\t\t\r\n\
  \tetapa_de_construccion = $('#field_datos_generales_de_la_solicitud_datos_generales_de_la_solicitud_etapa_de_construccion');\r\n\
  \t\r\n\
  \t////Funciones genericas para mostrar u ocultar campos\r\n\
  \t\tfunction mostrar(obj) {\r\n\
  \t\t\tobj.parent().parent().show();\r\n\
  \t\t}\r\n\
  \t    function ocultar(obj) {\r\n\
  \t\tobj.parent().parent().hide();\r\n\
  \t\t}\r\n\
  \t////para no perder cambios en reapro y entre pasos\r\n\
  \r\n\
  \t\t$( function() {\r\n\
  \t\t\tif ($(tipo_de_plano).find(':selected').val()== \"Plano Original de Edificaci\xC3\xB3n\") {\r\n\
  \t       \t\tmostrar(no_de_anteproyecto);\r\n\
  \t       \t\tmostrar(fecha_de_aprobacion_de_anteproyecto);\r\n\
  \t       \t} else {\r\n\
  \t       \t\tocultar(no_de_anteproyecto);\r\n\
  \t       \t\tocultar(fecha_de_aprobacion_de_anteproyecto);\r\n\
  \t        };\r\n\
  \r\n\
  \t        if(($(etapa_de_construccion).find(':selected').val()==\"\") && ($(tipo_de_solicitud_municipio).find(':selected').val()!=\"Re-aprobaci\xC3\xB3n\")){\r\n\
  \t\t\t\tocultar(no_plano_original);\r\n\
  \t\t\t} \r\n\
  \t\t\telse if (($(tipo_de_plano).find(':selected').val()== \"Plano Adicional de Edificaci\xC3\xB3n\") || ($(tipo_de_solicitud_municipio).find(':selected').val()==\"Re-aprobaci\xC3\xB3n\") || \r\n\
  \t\t\t\t($(etapa_de_construccion).find(':selected').val()!= \"Plano completo\")) {\r\n\
  \t\t\t\t mostrar(no_plano_original);\r\n\
  \t\t\t\t}\r\n\
  \t\t\t else{\r\n\
  \t\t\t\tocultar(no_plano_original);\r\n\
  \t\t\t};\r\n\
  \t\t});\r\n\
  });\r\n\
  \r\n\
  \r\n\
  ////LP...Funci\xC3\xB3n para ocultar o mostrar campos del coparticipante profesional\r\n\
  $(document).ready(function(){\r\n\
  \t$.each( $('[id*=datos_del_co_participante_]'), function(index, campo) {\r\n\
  \t//variable para la posici\xC3\xB3n de las instancias\r\n\
  \t\t var pos = (this.id).match(/_instance_[\\d][\\d]/);\r\n\
  \t\t if (pos == null){\r\n\
  \t\t   pos = (this.id).match(/_instance_[\\d]/);\r\n\
  \t\t }\r\n\
  \t//concatenando rutas\r\n\
  \t var mod1 = \"#field_datos_del_co_participante\";\r\n\
  \t var tipo_co = \"_datos_del_co_participante_tipo_de_co_participante_string\";\r\n\
  \t var idone = \"_datos_del_co_participante_idoneidad\";\r\n\
  \t var esp= \"_datos_del_co_participante_especialidad_profesional\";\r\n\
  \t var mod3 = mod1.concat(pos);\r\n\
  \t var tipo_coparticipante = mod3.concat(tipo_co);\r\n\
  \t var idoneidad = mod3.concat(idone);\r\n\
  \t var especialidad = mod3.concat(esp);\r\n\
  \r\n\
  \t\t    //para no perder cambios entre pasos y reparo\r\n\
  \t\t\t\tif ($(tipo_coparticipante).val() == \"Profesional responsable\") {\r\n\
  \t\t\t\t\t\t$(idoneidad).parent().parent().show();\r\n\
  \t\t\t\t\t\t$(especialidad).parent().parent().show();\r\n\
  \t\t\t\t} else {\r\n\
  \t\t\t\t\t$(idoneidad).parent().parent().hide();\r\n\
  \t\t\t\t\t$(especialidad).parent().parent().hide();\r\n\
  \t\t\t\t};\r\n\
  \r\n\
  \t});\r\n\
  });\r\n\
  \t\t\t"
