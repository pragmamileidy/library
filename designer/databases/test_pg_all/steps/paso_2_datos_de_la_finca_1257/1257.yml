--- 
id: 1257
name: Paso 2 - Datos de la Finca
label: Datos del Proyecto y Datos de la Finca
description: "Ingrese los Datos del Proyecto y Verifique los Datos de la Finca y realice cambios si es necesario "
fill_step_id: 628
created_at: 2013-04-16 03:01:45 Z
updated_at: 2013-05-16 21:48:57 Z
include: "{\"2633\":{\"2197\":{\"2393\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2394\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2396\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2397\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2398\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2400\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2401\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"2634\":{\"2485\":{\"365\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3102\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3103\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"367\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"366\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2089\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2090\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2091\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2402\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2486\":{\"3104\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3105\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3106\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2487\":{\"2461\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1657\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1658\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1659\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1660\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1661\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2488\":{\"2845\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2846\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2847\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2848\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2489\":{\"2093\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2094\":{\"views\":\"default\",\"enabled\":\"enabled\"}}}}"
allowed_next_to_steps: ""
allowed_back_to_steps: ""
controls: ,back,next,close,close_and_save,save
on_becoming: ""
on_transition: ""
views: 
back_step: Paso 1 - Datos del Solicitante y Co-Participantes
next_step: Paso 3 - Datos del Proyecto
position: 2
ajax_calls: |-
  $(function() {
  $('#id_del_combo_distritos').html("");
  $('#id_del_combo_corregimientos').html("");
  })
  $( function() {
  	$("#field_datos_de_la_finca_datos_de_ubicacion_de_la_finca_provincia_lista").change(function(){
  		var prov = $("#field_datos_de_la_finca_datos_de_ubicacion_de_la_finca_provincia_lista").find(':selected').val();
  		distritos(prov);
  	});
  	$("#field_datos_de_la_finca_datos_de_ubicacion_de_la_finca_distrito_lista").change(function(){
  		var distrito = $("#field_datos_de_la_finca_datos_de_ubicacion_de_la_finca_distrito_lista").find(':selected').val();
  		corregimientos(distrito);
  	});
  	});
  
  function distritos(provincia) {
   params = {
              "service_name":"ws_panama_distritos/where",
              "provincia":provincia
            }
  $.post(
              "/proxy_service/get_service",
              params,
              function(data){
  				var dist;
  				var html_options = "";
  				for (x in data){
  					dist = data[x];
  					html_options = html_options+'<option value="'+dist["distrito"] +'">'+dist["distrito"] +'</option>'
  				}	
  				$("#field_datos_de_la_finca_datos_de_ubicacion_de_la_finca_distrito_lista").html(html_options);
  				$("#field_datos_de_la_finca_datos_de_ubicacion_de_la_finca_corregimiento_lista").html("");
              }
            );
  }
  function corregimientos(distrito) {
   params = {
              "service_name":"ws_panama_corregimientos/where",
              "distrito":distrito
            }
  $.post(
              "/proxy_service/get_service",
              params,
              function(data){
  				var corr;
  				var html_options = "";
  				for (x in data){
  					corr = data[x];
  					html_options = html_options+'<option value="'+corr["corregimiento"] +'">'+corr["corregimiento"] +'</option>'
  				}	
  				$("#field_datos_de_la_finca_datos_de_ubicacion_de_la_finca_corregimiento_lista").html(html_options);
              }
            );
  }
