--- 
id: 1318
name: Paso 2 - Datos del Apoderado General
label: Datos del Representante y Apoderado
description: Datos del Representante y Apoderado
fill_step_id: 660
created_at: 2013-05-02 13:31:52 Z
updated_at: 2013-05-14 21:14:23 Z
include: "{\"2722\":{\"598\":{\"1461\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"1981\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"528\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"529\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"530\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"537\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"610\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"545\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"597\":{\"2000\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"585\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"631\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"594\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"1778\":{\"331\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"2724\":{\"598\":{\"2973\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1981\":{\"views\":\"default\",\"enabled\":\"enabled\"}}}}"
allowed_next_to_steps: ""
allowed_back_to_steps: ""
controls: ,back,next,close,close_and_save,save
on_becoming: ""
on_transition: "_error = nil\r\n\
  if form_data.get(\"apoderado_general.la_empresa_posee_apoderado_general.si_no\")==\"S\xC3\x8D\"\r\n\
  (1..5).each do |_num|\r\n\
  \t_tipo = form_data.get(\"datos_del_apoderado_general_instance_#{_num}.representante_legal.tipo_identificacion\")\r\n\
  \tform_data.set(\"datos_del_apoderado_general_instance_#{_num}.representante_legal.tipo_documento_string\",_tipo)\r\n\
  \tif _tipo == \"Cedula\"\t\r\n\
  \t\t_cedula = form_data.get(\"datos_del_apoderado_general_instance_#{_num}.representante_legal.cedula_pasaporte\")\r\n\
  \t\tresult = WebserviceConsumer.get('/service/bdin_tribunal_electoral/find.json?cedula=' + \"#{_cedula}\").parsed_response\r\n\
  \t\t_persona = result[\"response\"]\r\n\
  \t\tif !_persona.nil?\r\n\
  \t\r\n\
  \t\t\tform_data.set(\"datos_del_apoderado_general_instance_#{_num}.representante_legal.primer_nombre\",_persona[\"primerNombre\"])\r\n\
  \t\t\t#form_data.set(\"datos_del_apoderado_general_instance_#{_num}.representante_legal.segundo_nombre\",_persona[\"segundoNombre\"])\r\n\
  \t\t\tform_data.set(\"datos_del_apoderado_general_instance_#{_num}.representante_legal.primer_apellido\",_persona[\"primerApellido\"])\r\n\
  \t\t\tform_data.set(\"datos_del_apoderado_general_instance_#{_num}.representante_legal.segundo_apellido\",_persona[\"segundoApellido\"])\r\n\
  \t\t\t#form_data.set(\"datos_del_apoderado_general_instance_#{_num}.representante_legal.nacionalidad\",_persona[\"nacionalidad\"])\r\n\
  \t\t\tform_data.set(\"datos_del_apoderado_general_instance_#{_num}.representante_legal.lugar_de_nacimiento\",_persona[\"lugarNacimiento\"])\r\n\
  \t\t\tform_data.set(\"datos_del_apoderado_general_instance_#{_num}.representante_legal.fecha_de_nacimiento_string\",_persona[\"fechaNacimiento\"])\r\n\
  \t\r\n\
  \t\t\t#form_data.set(\"datos_del_apoderado_general_instance_#{_num}.direccion.numero_de_telefono\",_persona[\"tlfLocal\"])\r\n\
  \t\t\t#form_data.set(\"datos_del_apoderado_general_instance_#{_num}.direccion.numero_celular\",_persona[\"tlfCelular\"])\r\n\
  \t\t\t#form_data.set(\"datos_del_apoderado_general_instance_#{_num}.direccion.correo_electronico\",_persona[\"email\"])\r\n\
  \t\r\n\
  \t\t\tform_data.set(\"datos_del_apoderado_general_instance_#{_num}.direccion.pais_string\",_persona[\"pais\"])\r\n\
  \t\t\tform_data.set(\"datos_del_apoderado_general_instance_#{_num}.direccion.provincia\",_persona[\"provincia\"])\r\n\
  \t\t\tform_data.set(\"datos_del_apoderado_general_instance_#{_num}.direccion.distrito\",_persona[\"distrito\"])\r\n\
  \t\t\tform_data.set(\"datos_del_apoderado_general_instance_#{_num}.direccion.corregimiento\",_persona[\"corregimiento\"])\r\n\
  \t\t\t#form_data.set(\"datos_del_apoderado_general_instance_#{_num}.direccion.calle_o_avenida\",_persona[\"calle-avenida\"])\r\n\
  \t\t\t#form_data.set(\"datos_del_apoderado_general_instance_#{_num}.direccion.numero_de_casa_apartamento\",_persona[\"nroCasaApartamento\"])\t\r\n\
  \t\telse\r\n\
  \t\t\ttransition_errors << \"La c\xC3\xA9dula o pasaporte suministrado no existe en el sistema. Favor revise  el valor del apoderado 1.\"\r\n\
  \t\tend\r\n\
  \tend\r\n\
  end"
views: 
back_step: " Paso 1 - Informacion de la Solicitud"
next_step: Paso 3 - Datos Generales
position: 1
ajax_calls: |
  $( function() {
  	
  		 $(document).ready(function(){
  
  					
  					if($("#field_datos_del_representante_legal_instance_1_representante_legal_tipo_documento_string").val() == 'Pasaporte'){
  					    $("#field_datos_del_representante_legal_instance_1_representante_legal_cedula_pasaporte").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_1_representante_legal_primer_nombre").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_1_representante_legal_primer_apellido").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_1_representante_legal_segundo_nombre").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_1_representante_legal_segundo_apellido").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_1_representante_legal_lugar_de_nacimiento").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_1_representante_legal_nacionalidad").removeAttr("disabled");					
  
  					}
  					if($("#field_datos_del_representante_legal_instance_2_representante_legal_tipo_documento_string").val() == 'Pasaporte'){
  					    $("#field_datos_del_representante_legal_instance_2_representante_legal_cedula_pasaporte").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_2_representante_legal_primer_nombre").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_2_representante_legal_primer_apellido").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_2_representante_legal_segundo_nombre").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_2_representante_legal_segundo_apellido").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_2_representante_legal_lugar_de_nacimiento").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_2_representante_legal_nacionalidad").removeAttr("disabled");					
  
  					}					
  					if($("#field_datos_del_representante_legal_instance_3_representante_legal_tipo_documento_string").val() == 'Pasaporte'){
  					    $("#field_datos_del_representante_legal_instance_3_representante_legal_cedula_pasaporte").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_3_representante_legal_primer_nombre").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_3_representante_legal_primer_apellido").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_3_representante_legal_segundo_nombre").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_3_representante_legal_segundo_apellido").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_3_representante_legal_lugar_de_nacimiento").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_3_representante_legal_nacionalidad").removeAttr("disabled");					
  
  					}
  					if($("#field_datos_del_representante_legal_instance_4_representante_legal_tipo_documento_string").val() == 'Pasaporte'){
  					    $("#field_datos_del_representante_legal_instance_4_representante_legal_cedula_pasaporte").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_4_representante_legal_primer_nombre").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_4_representante_legal_primer_apellido").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_4_representante_legal_segundo_nombre").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_4_representante_legal_segundo_apellido").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_4_representante_legal_lugar_de_nacimiento").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_4_representante_legal_nacionalidad").removeAttr("disabled");					
  
  					}		   
  					if($("#field_datos_del_representante_legal_instance_5_representante_legal_tipo_documento_string").val() == 'Pasaporte'){
  					    $("#field_datos_del_representante_legal_instance_5_representante_legal_cedula_pasaporte").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_5_representante_legal_primer_nombre").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_5_representante_legal_primer_apellido").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_5_representante_legal_segundo_nombre").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_5_representante_legal_segundo_apellido").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_5_representante_legal_lugar_de_nacimiento").removeAttr("disabled");
  						$("#field_datos_del_representante_legal_instance_5_representante_legal_nacionalidad").removeAttr("disabled");					
  
  					}	   
  		   
  		});
  
  		});

