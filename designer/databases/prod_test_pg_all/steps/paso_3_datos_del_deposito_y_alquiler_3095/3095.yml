--- 
id: 3095
name: Paso 3 - Datos del Deposito y Alquiler
label: Datos del Deposito y Alquiler
description: ""
fill_step_id: 1654
created_at: 2015-01-13 15:39:10 Z
updated_at: 2015-01-13 15:39:10 Z
include: "{\"4750\":{\"1774\":{\"2213\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1587\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1588\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"1775\":{\"1595\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1596\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3413\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3414\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3415\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1599\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1601\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1602\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1603\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1604\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1605\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"4751\":{\"1776\":{\"1606\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1607\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"1777\":{\"1609\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1610\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"4752\":{\"2862\":{\"3377\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2863\":{\"3378\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"4753\":{\"2860\":{\"3374\":{\"views\":\"default\",\"enabled\":\"enabled\"}}}}"
allowed_next_to_steps: ""
allowed_back_to_steps: ""
controls: ,back,next,close,close_and_save,save
on_becoming: ""
on_transition: "# Obtener valor del config\r\n                valor = @config.route(\"Rates-payment-payment-payment\")\r\n                \r\n                if valor == \"Electr\xC3\xB3nico\"\r\n                \r\n                        form_data.set(\"forma_de_pago.forma_de_pago.indique_la_forma_de_pago\", \"Pago Electr\xC3\xB3nico\")\r\n                \r\n                end\r\n                if valor == \"Manual\"\r\n                \r\n                        form_data.set(\"forma_de_pago.forma_de_pago.indique_la_forma_de_pago\", \"Pago Manual\")\r\n                \r\n                end"
views: 
back_step: Paso 2 -  Datos de Arrendatario
next_step: Paso 4 - Adjuntar Archivos
position: 2
ajax_calls: |-
  $( function() {
  	$("#field_datos_del_deposito_y_alquiler_datos_alquiler_provincia_lista").change(function(){
  		var prov = $("#field_datos_del_deposito_y_alquiler_datos_alquiler_provincia_lista").find(':selected').val();
  		distritos(prov);
  	});
  	$("#field_datos_del_deposito_y_alquiler_datos_alquiler_distrito_lista").change(function(){
  		var distrito = $("#field_datos_del_deposito_y_alquiler_datos_alquiler_distrito_lista").find(':selected').val();
  		corregimientos(distrito);
  	});
  	});
  
  function distritos(provincia) {
   params = {
              "service_name":"ws_panama_distritos/where",
              "provincia":provincia
            }
  $.post(
              "/proxy_service/get_service",
              params,
              function(data){
  				var dist;
  				var html_options = "";
  				for (x in data){
  					dist = data[x];
  					html_options = html_options+'<option value="'+dist["distrito"] +'">'+dist["distrito"] +'</option>'
  				}	
  				$("#field_datos_del_deposito_y_alquiler_datos_alquiler_distrito_lista").html(html_options);
  				$("#field_datos_del_deposito_y_alquiler_datos_alquiler_corregimiento_lista").html("");
              }
            );
  }
  function corregimientos(distrito) {
   params = {
              "service_name":"ws_panama_corregimientos/where",
              "distrito":distrito
            }
  $.post(
              "/proxy_service/get_service",
              params,
              function(data){
  				var corr;
  				var html_options = "";
  				for (x in data){
  					corr = data[x];
  					html_options = html_options+'<option value="'+corr["corregimiento"] +'">'+corr["corregimiento"] +'</option>'
  				}	
  				$("#field_datos_del_deposito_y_alquiler_datos_alquiler_corregimiento_lista").html(html_options);
              }
            );
  }
