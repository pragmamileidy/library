--- 
id: 2918
name: Paso 1 - Ingresar tipo de Solicitante y de Solicitud
label: Ingresar tipo de Solicitante y de Solicitud
description: ""
fill_step_id: 1565
created_at: 2014-06-26 20:27:44 Z
updated_at: 2014-07-15 21:37:53 Z
include: "{\"4376\":{\"3212\":{\"3629\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3630\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"4375\":{\"3263\":{\"3702\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3698\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"3211\":{\"3627\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3690\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"4371\":{\"3208\":{\"3716\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"4463\":{\"3261\":{\"3712\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3692\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"4385\":{\"1710\":{\"1401\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"1402\":{\"views\":\"default\",\"enabled\":\"disabled\"}}},\"4395\":{\"3226\":{\"3696\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3699\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3700\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3701\":{\"views\":\"default\",\"enabled\":\"enabled\"}}}}"
allowed_next_to_steps: ""
allowed_back_to_steps: ""
controls: ,next,close,close_and_save,save
on_becoming: ""
on_transition: "\r\n\
  # Datos del Solicitante Natural #\r\n\
  if @owner[\"kind_of_user_type\"] == \"NaturalPerson\"\r\n\
  \tif @owner[\"natural_person_type\"]==\"national_citizen\"\r\n\
  \t\tnro_documento=@owner[\"national_id\"]\r\n        tipo_documento=\"Cedula\"\r\n    \t\tresult = WebserviceConsumer.get( '/service/bdin_tribunal_electoral/find.json?cedula=' + \"#{nro_documento}\").parsed_response\r\n    \t\t data = result[\"response\"]\r\n\
  \t\t\t\tif data.nil? \r\n\
  \t\t\t\t\ttransition_errors << \"Los datos del solicitante no fueron encontrados, por favor verifique.\"\r\n                else\r\n                \tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.tipo_de_documento\",tipo_documento)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.cedula_pasaporte\",data[\"cedula\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.primer_nombre\",data[\"primerNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.segundo_nombre\",data[\"segundoNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.primer_apellido\",data[\"primerApellido\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.segundo_apellido\",data[\"segundoApellido\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.apellido_de_casada\",data[\"apellidoCasada\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_de_ubicacion.direccion\",data[\"direccionNacimiento\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_del_padre.primer_nombre\",data[\"primerNombrePadre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_del_padre.primer_apellido\",data[\"apellidoPaternoPadre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_de_la_madre.primer_nombre\",data[\"primerNombreMadre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_de_la_madre.primer_apellido\",data[\"apellidoPaternoMadre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_del_padre.documento_hijo\",nro_documento)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_de_la_madre.documento_hijo\",nro_documento)\r\n\
  \t\t\t\t\tfecha = data[\"fechaNacimiento\"]\r\n\
  \t\t\t\t\tfecha_n = Time.parse(fecha).strftime(\"%d-%m-%Y\")\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.fecha_de_nacimiento\",fecha_n)\r\n\
  \r\n\
  \t\t\t\t\tedad = ((Date.today - fecha_n.to_date).to_f / 365).to_i\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.edad\",edad)\r\n\
  \t\t\t\t\t\r\n\
  \t\t\t\t\t##### USADO PARA PRINT DESIGN #####\r\n\
  \t\t\t\t\t\tsegundoNombre = form_data.get(\"datos_del_titular_rp.datos_basicos_de_persona_natural.segundo_nombre\")\r\n\
  \t\t\t\t\t\tapellidoCasada = form_data.get(\"datos_del_titular_rp.datos_basicos_de_persona_natural.apellido_de_casada\")\r\n\
  \t\t\t\t\t\t_nombre =  \"#{data[\"primerNombre\"]} #{segundoNombre} #{data[\"primerApellido\"]} #{data[\"segundoApellido\"]} #{apellidoCasada}\"\r\n\
  \t\t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.nombre_completo\",_nombre)\r\n\
  \r\n\
  \t\t\t\t\t#######Datos solicitante##########################################\r\n\
  \r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.tipo_documento\",tipo_documento)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.cedula_pasaporte\",data[\"cedula\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.primer_nombre\",data[\"primerNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.segundo_nombre\",data[\"segundoNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.primer_apellido\",data[\"primerApellido\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.segundo_apellido\",data[\"segundoApellido\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.apellido_de_casada\",data[\"apellidoCasada\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_de_ubicacion.direccion\",data[\"direccionNacimiento\"])\r\n\
  \t\t\t\t\t\r\n\
  \t\t\t\tend        \r\n\
  \t\telse\r\n\
  \t\t\tnro_documento=@owner[\"passport\"]\r\n\
  \t\t\ttipo_documento=\"Pasaporte\"\t\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.cedula_pasaporte\",nro_documento)\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.tipo_documento\",tipo_documento)\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_del_padre.documento_hijo\",nro_documento)\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_de_la_madre.documento_hijo\",nro_documento)\r\n\
  \tend\t\t\t\r\n\
  end             \r\n\
  \r\n\
  # Persona Jur\xC3\xADdica #\r\n\
  \r\n\
  if  @owner[\"kind_of_user_type\"] == \"JuridicalPerson\"\r\n    tipo_documento= form_data.get(\"datos_del_titular_rp.datos_basicos_de_persona_natural.tipo_de_documento\")\r\n\
  \tnro_documento=form_data.get(\"datos_del_titular_rp.datos_basicos_de_persona_natural.cedula_pasaporte\")\r\n \r\n\
  \tif tipo_documento==\"Cedula\"\r\n\
  \t\tresult = WebserviceConsumer.get( '/service/bdin_tribunal_electoral/find.json?cedula=' + \"#{nro_documento}\").parsed_response\r\n\
  \t\tdata = result[\"response\"]\r\n\
  \t\tif data.blank?\r\n\
  \t\t\tform_data.set(\"tipo_de_persona_dij.tipo_de_identificacion.numero_documento\",\"\")\t\t\t\t\r\n\
  \t\t\ttransition_errors << \"Los datos del solicitante, no fueron encontrados, por favor verifique.\"\r\n\
  \t\telse\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.tipo_de_documento\",tipo_documento)\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.cedula_pasaporte\",data[\"cedula\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.primer_nombre\",data[\"primerNombre\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.segundo_nombre\",data[\"segundoNombre\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.primer_apellido\",data[\"primerApellido\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.segundo_apellido\",data[\"segundoApellido\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.apellido_de_casada\",data[\"apellidoCasada\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_de_ubicacion.numero_de_telefono\",data[\"tlfLocal\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_de_ubicacion.correo_electronico\",data[\"email\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_de_ubicacion.pais\",data[\"pais\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_de_ubicacion.direccion\",data[\"direccionNacimiento\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_del_padre.documento_hijo\",data[\"cedula\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_del_padre.primer_nombre\",data[\"primerNombrePadre\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_del_padre.primer_apellido\",data[\"apellidoPaternoPadre\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_de_la_madre.documento_hijo\",data[\"cedula\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_de_la_madre.primer_nombre\",data[\"primerNombreMadre\"])\r\n\
  \t\t\t\tform_data.set(\"datos_del_titular_rp.datos_de_la_madre.primer_apellido\",data[\"apellidoPaternoMadre\"])\r\n\
  \t\t\t\t\t\t\t\r\n\
  \t\t\t\t\t\tfecha = data[\"fechaNacimiento\"]\r\n\
  \t\t\t\t\t\tfecha_n = Time.parse(fecha).strftime(\"%d-%m-%Y\")\r\n\
  \t\t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.fecha_de_nacimiento\",fecha_n)\r\n\
  \r\n\
  \t\t\t\t\t\tedad = ((Date.today - fecha.to_date).to_f / 365).to_i\r\n\
  \t\t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.edad\",edad)\r\n\
  \t\t\t\t\t\t\r\n\
  \t\t\t\t\t\t\t##### USADO PARA PRINT DESIGN #####\r\n\
  \t\t\t\t\t\tsegundoNombre = form_data.get(\"datos_del_titular_rp.datos_basicos_de_persona_natural.segundo_nombre\")\r\n\
  \t\t\t\t\t\tapellidoCasada = form_data.get(\"datos_del_titular_rp.datos_basicos_de_persona_natural.apellido_de_casada\")\r\n\
  \t\t\t\t\t\t_nombre =  \"#{data[\"primerNombre\"]} #{segundoNombre} #{data[\"primerApellido\"]} #{data[\"segundoApellido\"]} #{apellidoCasada}\"\r\n\
  \t\t\t\t\t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.nombre_completo\",_nombre)\r\n\
  \r\n\
  \t\t\t\t\t\t#######Datos solicitante##########################################\r\n\
  \r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.tipo_documento\",tipo_documento)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.cedula_pasaporte\",data[\"cedula\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.primer_nombre\",data[\"primerNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.segundo_nombre\",data[\"segundoNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.primer_apellido\",data[\"primerApellido\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.segundo_apellido\",data[\"segundoApellido\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_basicos_de_persona_natural.apellido_de_casada\",data[\"apellidoCasada\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_solicitante.datos_de_ubicacion.direccion\",data[\"direccionNacimiento\"])\r\n\
  \t\t\t\t\r\n\
  \t\tend\r\n\
  \t\t\t\t\t\t \r\n\
  \telse\r\n\
  \t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.cedula_pasaporte\",nro_documento)\r\n\
  \t\tform_data.set(\"datos_del_titular_rp.datos_basicos_de_persona_natural.tipo_de_documento\",tipo_documento)\r\n\
  \t\tform_data.set(\"datos_del_titular_rp.datos_del_padre.documento_hijo\",nro_documento)\r\n\
  \t\tform_data.set(\"datos_del_titular_rp.datos_de_la_madre.documento_hijo\",nro_documento)\r\n\
  \t\t\t\t\t\t\t\t\r\n\
  \tend\r\n\
  end\t\t\t"
views: 
back_step: ""
next_step: Paso 2 - Datos del Solicitante
position: 1
ajax_calls: ""
