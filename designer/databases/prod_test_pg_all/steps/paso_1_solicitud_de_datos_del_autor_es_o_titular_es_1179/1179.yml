--- 
id: 1179
name: Paso 1 - Solicitud de datos del Autor (es) o Titular (es)
label: Solicitud de datos del Autor (es) i Titular (es)
description: ""
fill_step_id: 586
created_at: 2013-03-14 18:40:29 Z
updated_at: 2014-12-19 16:04:56 Z
include: "{\"4293\":{\"3141\":{\"3601\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3602\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3603\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"4294\":{\"3141\":{\"3601\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3602\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3603\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"4295\":{\"3141\":{\"3601\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3602\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3603\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"4296\":{\"3141\":{\"3601\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3602\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"3603\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"2531\":{\"1710\":{\"1401\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"1402\":{\"views\":\"default\",\"enabled\":\"disabled\"}}}}"
allowed_next_to_steps: ""
allowed_back_to_steps: ""
controls: ,next,back_steps,next_steps,close,close_and_save,save
on_becoming: "\r\n\
  form_data.set(\"informacion_de_solicitud.datos_de_la_solicitud.fecha_de_solicitud\",@application[\"created_at\"])\r\n\
  result = WebserviceConsumer.get( '/consecutive/generador_audiovisualesobras/generate.json').parsed_response\r\n\
  _consecutivo = result[\"response\"]\r\n\
  _consecutivo = \"#{@application[\"id\"]}-\"+\"#{_consecutivo[\"value\"]}\"\r\n\
  form_data.set(\"informacion_de_solicitud.datos_de_la_solicitud.numero_de_solicitud\",_consecutivo)"
on_transition: "#### INTEGRACION PARA OBTENER LOS DATOS DEL DIRECTOR - DV ####\r\n\
  \r\n\
  \t_buenas = []\r\n\
  \t_malas = []\r\n\
  \t_dupli = []\r\n\
  \t(1..5).each do |_num|\r\n\
  \t\t_tipo = form_data.get(\"tipo_de_documento_director_instance_#{_num}.tipo_documento_mici.tipo_de_documento\")\r\n\
  \t\tif _tipo == \"C\xC3\xA9dula\"\r\n\
  \t\t\tnro_documento = form_data.get(\"tipo_de_documento_director_instance_#{_num}.tipo_documento_mici.no_documento\")\r\n\
  \t\t\tif !nro_documento.blank?\r\n\
  \t\t\t\tresult = WebserviceConsumer.get('/service/bdin_tribunal_electoral/find.json?cedula=' + \"#{nro_documento}\").parsed_response\r\n\
  \t\t\t\tdatos = result[\"response\"]\r\n\
  \t\t\t\tif datos.blank? \r\n\
  \t\t\t\t\t_malas << nro_documento\r\n\
  \t\t\t\telse\r\n\
  \t\t\t\t\t_buenas << nro_documento\r\n\
  \t\t\t\t\tform_data.set(\"tipo_de_documento_director_instance_#{_num}.tipo_documento_mici.tipo_de_documento\",_tipo)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.identificacion\",nro_documento)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.primer_nombre\",datos[\"primerNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.primer_apellido\",datos[\"primerApellido\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.segundo_nombre\",datos[\"segundoNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.segundo_apellido\",datos[\"segundoApellido\"])\r\n\
  \t\t\t\t\t#form_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.apellido_de_casada\",datos[\"apellidoCasada\"])\r\n\
  \t\t\t\t\t#form_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.direccion\",datos[\"direccion\"])\r\n\
  \t\t\t\t\tdatos = nil\r\n\
  \t\t\t\tend\r\n\
  \t\t\tend\r\n\
  \t\tend\r\n\
  \t\t\r\n\
  \t\t#### TIPO DE DOCUMENTO PASAPORTE DIRECTOR ####\r\n\
  \t\tif _tipo == \"Pasaporte\"\r\n\
  \t\t\tnro_documento = form_data.get(\"tipo_de_documento_director_instance_#{_num}.tipo_documento_mici.no_documento\")\r\n\
  \t\t\tform_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.identificacion\",nro_documento)\r\n\
  \t\tend\r\n\
  \t\tdocumen = form_data.get(\"tipo_de_documento_director_instance_#{_num}.tipo_documento_mici.tipo_de_documento\")\r\n\
  \t\tform_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.tipo_de_documento\", documen)\r\n\
  \t\t\r\n\
  \tend\r\n\
  \t\r\n\
  \t\tif !_malas.blank?\r\n\
  \t\t\ttransition_errors << \"La(s) cedula(s) #{_malas.join(\",\")} del Director no se encuentran en el sistema\"\r\n\
  \t\tend\r\n\
  \r\n\
  \t\tif !_buenas.blank?\r\n\
  \t\t\t_dupli = _buenas.detect{ |e| _buenas.count(e) > 1}\r\n\
  \t\t\tif !_dupli.blank?\r\n\
  \t\t\t\ttransition_errors << \"Una de las cedulas de los Directores se ingres\xC3\xB3 m\xC3\xA1s de una vez\"\r\n\
  \t\t\tend\r\n\
  \t\tend\r\n\
  \t\t\r\n\
  \t\t#### TIPO DE DOCUMENTO RUC DIRECTOR ####\r\n\
  \t\t_dup = []\r\n\
  \t\t_malasj = []\r\n\
  \t\t_buenasj = []\r\n\
  \t\t\r\n\
  \t\t\t(1..5).each do |_num|\r\n\
  \t\t\t\t_tipo = form_data.get(\"tipo_de_documento_director_instance_#{_num}.tipo_documento_mici.tipo_de_documento\")\r\n\
  \t\t\t\tif _tipo == \"RUC\"\r\n\
  \t\t\t\t\ttipoSoc = form_data.get(\"tipo_de_documento_director_instance_#{_num}.tipo_documento_mici.tipo_sociedad\")\r\n\
  \t\t\t\t\tnro_documento = form_data.get(\"tipo_de_documento_director_instance_#{_num}.tipo_documento_mici.no_documento\")\r\n\
  \t\t\t\t\tif !nro_documento.blank?\r\n\
  \t\t\t\t\t\tresult = WebserviceConsumer.get(URI.escape('/service/bdin_registro_publico_empresas/find.json?ruc=' + \"#{nro_documento}\" + '&tipo_sociedad=' + \"#{tipoSoc}\")).parsed_response\r\n\
  \t\t\t\t\t\tdatos = result[\"response\"] \r\n\
  \t\t\t\t\t\tif datos.blank? \r\n\
  \t\t\t\t\t\t\t_malasj << nro_documento\r\n\
  \t\t\t\t\t\telse\r\n\
  \t\t\t\t\t\t\t_buenasj << nro_documento\r\n\
  \t\t\t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.director_juridico_instance_#{_num}.ruc\",nro_documento)\r\n\
  \t\t\t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.director_juridico_instance_#{_num}.tipo_sociedad\",tipoSoc)\r\n\
  \t\t\t\t\t\t\t#form_data.set(\"datos_del_autor_es.director_juridico_instance_#{_num}.ruc\",datos[\"ruc\"])\r\n\
  \t\t\t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.director_juridico_instance_#{_num}.nombre\",datos[\"nombre_empresa\"])\r\n\
  \t\t\t\t\t\t\t#form_data.set(\"datos_del_autor_es.director_juridico_instance_#{_num}.direccion\",datos[\"direccion\"])\r\n\
  \t\t\t\t\t\t\tdatos = nil\r\n\
  \t\t\t\t\t\tend\r\n\
  \t\t\t\t\tend\r\n\
  \t\t\t\tend\r\n\
  \t\t\tend\r\n\
  \t\t\r\n\
  \t\tif !_malasj.blank?\r\n\
  \t\t\ttransition_errors << \"Uno de los RUC #{_malasj.join(\",\")} del Director no se encuentran en el sistema\"\r\n\
  \t\tend\r\n\
  \r\n\
  \t\tif !_buenasj.blank?\r\n\
  \t\t\t_dup = _buenasj.detect{ |e| _buenasj.count(e) > 1}\r\n\
  \t\t\tif !_dup.blank?\r\n\
  \t\t\t\ttransition_errors << \"Una de los RUC de los Directores se ingres\xC3\xB3 m\xC3\xA1s de una vez\"\r\n\
  \t\t\tend\r\n\
  \t\tend\r\n\
  \t\t\r\n\
  \t#### INTEGRACION PARA OBTENER LOS DATOS AUTOR DE GUION\r\n\
  \r\n\
  \t_buena = []\r\n\
  \t_mala = []\r\n\
  \t_dupl = []\r\n\
  \t(1..5).each do |_num|\r\n\
  \t\t_tipo = form_data.get(\"tipo_de_documento_autor_guion_instance_#{_num}.tipo_documento_mici.tipo_de_documento\")\r\n\
  \t\tif _tipo == \"C\xC3\xA9dula\"\r\n\
  \t\t\tnro_documento = form_data.get(\"tipo_de_documento_autor_guion_instance_#{_num}.tipo_documento_mici.no_documento\")\r\n\
  \t\t\tif !nro_documento.blank?\r\n\
  \t\t\t\tresult = WebserviceConsumer.get('/service/bdin_tribunal_electoral/find.json?cedula=' + \"#{nro_documento}\").parsed_response\r\n\
  \t\t\t\tdatos = result[\"response\"]\r\n\
  \t\t\t\tif datos.blank? \r\n\
  \t\t\t\t\t_mala << nro_documento\r\n\
  \t\t\t\telse\r\n\
  \t\t\t\t\t_buena << nro_documento\r\n\
  \t\t\t\t\tform_data.set(\"tipo_de_documento_autor_guion_instance_#{_num}.tipo_documento_mici.tipo_de_documento\",_tipo)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_guion_instance_#{_num}.identificacion\",nro_documento)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_guion_instance_#{_num}.primer_nombre\",datos[\"primerNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_guion_instance_#{_num}.primer_apellido\",datos[\"primerApellido\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_guion_instance_#{_num}.segundo_nombre\",datos[\"segundoNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_guion_instance_#{_num}.segundo_apellido\",datos[\"segundoApellido\"])\r\n\
  \t\t\t\t\t#form_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.apellido_de_casada\",datos[\"apellidoCasada\"])\r\n\
  \t\t\t\t\t#form_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.direccion\",datos[\"direccion\"])\r\n\
  \t\t\t\t\tdatos = nil\r\n\
  \t\t\t\tend\r\n\
  \t\t\tend\r\n\
  \t\tend\r\n\
  \t\t\r\n\
  \t\t#### TIPO DE DOCUMENTO PASAPORTE DE AUTOR DE GUION ####\r\n\
  \t\tif _tipo == \"Pasaporte\"\r\n\
  \t\t\tnro_documento = form_data.get(\"tipo_de_documento_autor_guion_instance_#{_num}.tipo_documento_mici.no_documento\")\r\n\
  \t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_guion_instance_#{_num}.identificacion\",nro_documento)\r\n\
  \t\tend\r\n\
  \t\tdocumen = form_data.get(\"tipo_de_documento_autor_guion_instance_#{_num}.tipo_documento_mici.tipo_de_documento\")\r\n\
  \t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_guion_instance_#{_num}.tipo_de_documento\", documen)\r\n\
  \t\t\r\n\
  \tend\r\n\
  \t\r\n\
  \t\tif !_mala.blank?\r\n\
  \t\t\ttransition_errors << \"La(s) cedula(s) #{_mala.join(\",\")} del Autor de Gui\xC3\xB3n no se encuentran en el sistema\"\r\n\
  \t\tend\r\n\
  \r\n\
  \t\tif !_buena.blank?\r\n\
  \t\t\t_dupl = _buena.detect{ |e| _buena.count(e) > 1}\r\n\
  \t\t\tif !_dupl.blank?\r\n\
  \t\t\t\ttransition_errors << \"Una de las cedulas de los Autores de Gui\xC3\xB3n se ingres\xC3\xB3 m\xC3\xA1s de una vez\"\r\n\
  \t\t\tend\r\n\
  \t\tend\r\n\
  \t\t\r\n\
  \t\t#### TIPO DE DOCUMENTO RUC AUTOR DE GUION ####\r\n\
  \t\t_duplicado = []\r\n\
  \t\t_malaj = []\r\n\
  \t\t_buenaj = []\r\n\
  \t\t\r\n\
  \t\t\t(1..5).each do |_num|\r\n\
  \t\t\t\t_tipo = form_data.get(\"tipo_de_documento_autor_guion_instance_#{_num}.tipo_documento_mici.tipo_de_documento\")\r\n\
  \t\t\t\tif _tipo == \"RUC\"\r\n\
  \t\t\t\t\ttipoSoc = form_data.get(\"tipo_de_documento_autor_guion_instance_#{_num}.tipo_documento_mici.tipo_sociedad\")\r\n\
  \t\t\t\t\tnro_documento = form_data.get(\"tipo_de_documento_autor_guion_instance_#{_num}.tipo_documento_mici.no_documento\")\r\n\
  \t\t\t\t\tif !nro_documento.blank?\r\n\
  \t\t\t\t\t\tresult = WebserviceConsumer.get(URI.escape('/service/bdin_registro_publico_empresas/find.json?ruc=' + \"#{nro_documento}\" + '&tipo_sociedad=' + \"#{tipoSoc}\")).parsed_response\r\n\
  \t\t\t\t\t\tdatos = result[\"response\"] \r\n\
  \t\t\t\t\t\tif datos.blank? \r\n\
  \t\t\t\t\t\t\t_malaj << nro_documento\r\n\
  \t\t\t\t\t\telse\r\n\
  \t\t\t\t\t\t\t_buenaj << nro_documento\r\n\
  \t\t\t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_guion_juridico_instance_#{_num}.ruc\",nro_documento)\r\n\
  \t\t\t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_guion_juridico_instance_#{_num}.tipo_sociedad\",tipoSoc)\r\n\
  \t\t\t\t\t\t\t#form_data.set(\"datos_del_autor_es.director_juridico_instance_#{_num}.ruc\",datos[\"ruc\"])\r\n\
  \t\t\t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_guion_juridico_instance_#{_num}.nombre\",datos[\"nombre_empresa\"])\r\n\
  \t\t\t\t\t\t\t#form_data.set(\"datos_del_autor_es.director_juridico_instance_#{_num}.direccion\",datos[\"direccion\"])\r\n\
  \t\t\t\t\t\t\tdatos = nil\r\n\
  \t\t\t\t\t\tend\r\n\
  \t\t\t\t\tend\r\n\
  \t\t\t\tend\r\n\
  \t\t\tend\r\n\
  \t\t\r\n\
  \t\tif !_malaj.blank?\r\n\
  \t\t\ttransition_errors << \"Uno de los RUC #{_malaj.join(\",\")} del Autor de Gui\xC3\xB3n no se encuentran en el sistema\"\r\n\
  \t\tend\r\n\
  \r\n\
  \t\tif !_buenaj.blank?\r\n\
  \t\t\t_duplicado = _buenaj.detect{ |e| _buenaj.count(e) > 1}\r\n\
  \t\t\tif !_duplicado.blank?\r\n\
  \t\t\t\ttransition_errors << \"Una de los RUC de los Autores de Gui\xC3\xB3n se ingres\xC3\xB3 m\xC3\xA1s de una vez\"\r\n\
  \t\t\tend\r\n\
  \t\tend\r\n\
  \t\t\r\n\
  \t\r\n\
  \t#### INTEGRACION PARA OBTENER LOS DATOS DEL AUTOR DE MUSICA\r\n\
  \r\n\
  \t_buen = []\r\n\
  \t_mal = []\r\n\
  \t_duplic = []\r\n\
  \t(1..5).each do |_num|\r\n\
  \t\t_tipo = form_data.get(\"tipo_de_documento_autor_musica_instance_#{_num}.tipo_documento_mici.tipo_de_documento\")\r\n\
  \t\tif _tipo == \"C\xC3\xA9dula\"\r\n\
  \t\t\tnro_documento = form_data.get(\"tipo_de_documento_autor_musica_instance_#{_num}.tipo_documento_mici.no_documento\")\r\n\
  \t\t\tif !nro_documento.blank?\r\n\
  \t\t\t\tresult = WebserviceConsumer.get('/service/bdin_tribunal_electoral/find.json?cedula=' + \"#{nro_documento}\").parsed_response\r\n\
  \t\t\t\tdatos = result[\"response\"]\r\n\
  \t\t\t\tif datos.blank? \r\n\
  \t\t\t\t\t_mal << nro_documento\r\n\
  \t\t\t\telse\r\n\
  \t\t\t\t\t_buen << nro_documento\r\n\
  \t\t\t\t\tform_data.set(\"tipo_de_documento_autor_musica_instance_#{_num}.tipo_documento_mici.tipo_de_documento\",_tipo)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_musica_instance_#{_num}.identificacion\",nro_documento)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_musica_instance_#{_num}.primer_nombre\",datos[\"primerNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_musica_instance_#{_num}.primer_apellido\",datos[\"primerApellido\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_musica_instance_#{_num}.segundo_nombre\",datos[\"segundoNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_musica_instance_#{_num}.segundo_apellido\",datos[\"segundoApellido\"])\r\n\
  \t\t\t\t\t#form_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.apellido_de_casada\",datos[\"apellidoCasada\"])\r\n\
  \t\t\t\t\t#form_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.direccion\",datos[\"direccion\"])\r\n\
  \t\t\t\t\tdatos = nil\r\n\
  \t\t\t\tend\r\n\
  \t\t\tend\r\n\
  \t\tend\r\n\
  \t\t\r\n\
  \t\t#### TIPO DE DOCUMENTO PASAPORTE DE AUTOR DE MUSICA ####\r\n\
  \t\tif _tipo == \"Pasaporte\"\r\n\
  \t\t\tnro_documento = form_data.get(\"tipo_de_documento_autor_musica_instance_#{_num}.tipo_documento_mici.no_documento\")\r\n\
  \t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_musica_instance_#{_num}.identificacion\",nro_documento)\r\n\
  \t\tend\r\n\
  \t\tdocumen = form_data.get(\"tipo_de_documento_autor_musica_instance_#{_num}.tipo_documento_mici.tipo_de_documento\")\r\n\
  \t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_musica_instance_#{_num}.tipo_de_documento\", documen)\r\n\
  \t\t\r\n\
  \tend\r\n\
  \t\r\n\
  \t\tif !_mal.blank?\r\n\
  \t\t\ttransition_errors << \"La(s) cedula(s) #{_mal.join(\",\")} del Autor de M\xC3\xBAsica no se encuentran en el sistema\"\r\n\
  \t\tend\r\n\
  \r\n\
  \t\tif !_buen.blank?\r\n\
  \t\t\t_duplic = _buen.detect{ |e| _buen.count(e) > 1}\r\n\
  \t\t\tif !_duplic.blank?\r\n\
  \t\t\t\ttransition_errors << \"Una de las cedulas de los Autores de M\xC3\xBAsica se ingres\xC3\xB3 m\xC3\xA1s de una vez\"\r\n\
  \t\t\tend\r\n\
  \t\tend\r\n\
  \t\t\r\n\
  \t\t#### TIPO DE DOCUMENTO RUC AUTOR DE MUSICA ####\r\n\
  \t\t_duplij = []\r\n\
  \t\t_malj = []\r\n\
  \t\t_buenj = []\r\n\
  \t\t\r\n\
  \t\t\t(1..5).each do |_num|\r\n\
  \t\t\t\t_tipo = form_data.get(\"tipo_de_documento_autor_musica_instance_#{_num}.tipo_documento_mici.tipo_de_documento\")\r\n\
  \t\t\t\tif _tipo == \"RUC\"\r\n\
  \t\t\t\t\ttipoSoc = form_data.get(\"tipo_de_documento_autor_musica_instance_#{_num}.tipo_documento_mici.tipo_sociedad\")\r\n\
  \t\t\t\t\tnro_documento = form_data.get(\"tipo_de_documento_autor_musica_instance_#{_num}.tipo_documento_mici.no_documento\")\r\n\
  \t\t\t\t\tif !nro_documento.blank?\r\n\
  \t\t\t\t\t\tresult = WebserviceConsumer.get(URI.escape('/service/bdin_registro_publico_empresas/find.json?ruc=' + \"#{nro_documento}\" + '&tipo_sociedad=' + \"#{tipoSoc}\")).parsed_response\r\n\
  \t\t\t\t\t\tdatos = result[\"response\"] \r\n\
  \t\t\t\t\t\tif datos.blank? \r\n\
  \t\t\t\t\t\t\t_malj << nro_documento\r\n\
  \t\t\t\t\t\telse\r\n\
  \t\t\t\t\t\t\t_buenj << nro_documento\r\n\
  \t\t\t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_musica_juridico_instance_#{_num}.ruc\",nro_documento)\r\n\
  \t\t\t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_musica_juridico_instance_#{_num}.tipo_sociedad\",tipoSoc)\r\n\
  \t\t\t\t\t\t\t#form_data.set(\"datos_del_autor_es.director_juridico_instance_#{_num}.ruc\",datos[\"ruc\"])\r\n\
  \t\t\t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_musica_juridico_instance_#{_num}.nombre\",datos[\"nombre_empresa\"])\r\n\
  \t\t\t\t\t\t\t#form_data.set(\"datos_del_autor_es.director_juridico_instance_#{_num}.direccion\",datos[\"direccion\"])\r\n\
  \t\t\t\t\t\t\tdatos = nil\r\n\
  \t\t\t\t\t\tend\r\n\
  \t\t\t\t\tend\r\n\
  \t\t\t\tend\r\n\
  \t\t\tend\r\n\
  \t\t\r\n\
  \t\tif !_malj.blank?\r\n\
  \t\t\ttransition_errors << \"Uno de los RUC #{_malj.join(\",\")} del Autor de M\xC3\xBAsica no se encuentran en el sistema\"\r\n\
  \t\tend\r\n\
  \r\n\
  \t\tif !_buenj.blank?\r\n\
  \t\t\t_duplij = _buenj.detect{ |e| _buenj.count(e) > 1}\r\n\
  \t\t\tif !_duplij.blank?\r\n\
  \t\t\t\ttransition_errors << \"Una de los RUC de los Autores de M\xC3\xBAsica se ingres\xC3\xB3 m\xC3\xA1s de una vez\"\r\n\
  \t\t\tend\r\n\
  \t\tend\r\n\
  \t\r\n\
  \t#### INTEGRACION PARA OBTENER LOS DATOS DEL AUTOR DE DIBUJO\r\n\
  \r\n\
  \t_buenn = []\r\n\
  \t_maln = []\r\n\
  \t_duplicn = []\r\n\
  \t(1..5).each do |_num|\r\n\
  \t\t_tipo = form_data.get(\"tipo_de_documento_autor_dibujo_instance_#{_num}.tipo_documento_mici.tipo_de_documento\")\r\n\
  \t\tif _tipo == \"C\xC3\xA9dula\"\r\n\
  \t\t\tnro_documento = form_data.get(\"tipo_de_documento_autor_dibujo_instance_#{_num}.tipo_documento_mici.no_documento\")\r\n\
  \t\t\tif !nro_documento.blank?\r\n\
  \t\t\t\tresult = WebserviceConsumer.get('/service/bdin_tribunal_electoral/find.json?cedula=' + \"#{nro_documento}\").parsed_response\r\n\
  \t\t\t\tdatos = result[\"response\"]\r\n\
  \t\t\t\tif datos.blank? \r\n\
  \t\t\t\t\t_maln << nro_documento\r\n\
  \t\t\t\telse\r\n\
  \t\t\t\t\t_buenn << nro_documento\r\n\
  \t\t\t\t\tform_data.set(\"tipo_de_documento_autor_dibujo_instance_#{_num}.tipo_documento_mici.tipo_de_documento\",_tipo)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_dibujo_instance_#{_num}.identificacion\",nro_documento)\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_dibujo_instance_#{_num}.primer_nombre\",datos[\"primerNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_dibujo_instance_#{_num}.primer_apellido\",datos[\"primerApellido\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_dibujo_instance_#{_num}.segundo_nombre\",datos[\"segundoNombre\"])\r\n\
  \t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_dibujo_instance_#{_num}.segundo_apellido\",datos[\"segundoApellido\"])\r\n\
  \t\t\t\t\t#form_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.apellido_de_casada\",datos[\"apellidoCasada\"])\r\n\
  \t\t\t\t\t#form_data.set(\"datos_del_autor_es_persona_natural.director_instance_#{_num}.direccion\",datos[\"direccion\"])\r\n\
  \t\t\t\t\tdatos = nil\r\n\
  \t\t\t\tend\r\n\
  \t\t\tend\r\n\
  \t\tend\r\n\
  \t\t\r\n\
  \t\t#### TIPO DE DOCUMENTO PASAPORTE DE AUTOR DE DIBUJO ####\r\n\
  \t\tif _tipo == \"Pasaporte\"\r\n\
  \t\t\tnro_documento = form_data.get(\"tipo_de_documento_autor_dibujo_instance_#{_num}.tipo_documento_mici.no_documento\")\r\n\
  \t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_dibujo_instance_#{_num}.identificacion\",nro_documento)\r\n\
  \t\tend\r\n\
  \t\tdocumen = form_data.get(\"tipo_de_documento_autor_dibujo_instance_#{_num}.tipo_documento_mici.tipo_de_documento\")\r\n\
  \t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_dibujo_instance_#{_num}.tipo_de_documento\", documen)\r\n\
  \t\t\r\n\
  \tend\r\n\
  \t\r\n\
  \t\tif !_maln.blank?\r\n\
  \t\t\ttransition_errors << \"La(s) cedula(s) #{_maln.join(\",\")} del Autor de Dibujo no se encuentran en el sistema\"\r\n\
  \t\tend\r\n\
  \r\n\
  \t\tif !_buenn.blank?\r\n\
  \t\t\t_duplicn = _buenn.detect{ |e| _buenn.count(e) > 1}\r\n\
  \t\t\tif !_duplicn.blank?\r\n\
  \t\t\t\ttransition_errors << \"Una de las cedulas de los Autores de Dibujo se ingres\xC3\xB3 m\xC3\xA1s de una vez\"\r\n\
  \t\t\tend\r\n\
  \t\tend\r\n\
  \t\t\r\n\
  \t\t#### TIPO DE DOCUMENTO RUC AUTOR DE DIBUJO ####\r\n\
  \t\t_duplijj = []\r\n\
  \t\t_maljj = []\r\n\
  \t\t_buenjj = []\r\n\
  \t\t\r\n\
  \t\t\t(1..5).each do |_num|\r\n\
  \t\t\t\t_tipo = form_data.get(\"tipo_de_documento_autor_dibujo_instance_#{_num}.tipo_documento_mici.tipo_de_documento\")\r\n\
  \t\t\t\tif _tipo == \"RUC\"\r\n\
  \t\t\t\t\ttipoSoc = form_data.get(\"tipo_de_documento_autor_dibujo_instance_#{_num}.tipo_documento_mici.tipo_sociedad\")\r\n\
  \t\t\t\t\tnro_documento = form_data.get(\"tipo_de_documento_autor_dibujo_instance_#{_num}.tipo_documento_mici.no_documento\")\r\n\
  \t\t\t\t\tif !nro_documento.blank?\r\n\
  \t\t\t\t\t\tresult = WebserviceConsumer.get(URI.escape('/service/bdin_registro_publico_empresas/find.json?ruc=' + \"#{nro_documento}\" + '&tipo_sociedad=' + \"#{tipoSoc}\")).parsed_response\r\n\
  \t\t\t\t\t\tdatos = result[\"response\"] \r\n\
  \t\t\t\t\t\tif datos.blank? \r\n\
  \t\t\t\t\t\t\t_maljj << nro_documento\r\n\
  \t\t\t\t\t\telse\r\n\
  \t\t\t\t\t\t\t_buenjj << nro_documento\r\n\
  \t\t\t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_dibujo_juridico_instance_#{_num}.ruc\",nro_documento)\r\n\
  \t\t\t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_dibujo_juridico_instance_#{_num}.tipo_sociedad\",tipoSoc)\r\n\
  \t\t\t\t\t\t\t#form_data.set(\"datos_del_autor_es.director_juridico_instance_#{_num}.ruc\",datos[\"ruc\"])\r\n\
  \t\t\t\t\t\t\tform_data.set(\"datos_del_autor_es_persona_natural.autor_dibujo_juridico_instance_#{_num}.nombre\",datos[\"nombre_empresa\"])\r\n\
  \t\t\t\t\t\t\t#form_data.set(\"datos_del_autor_es.director_juridico_instance_#{_num}.direccion\",datos[\"direccion\"])\r\n\
  \t\t\t\t\t\t\tdatos = nil\r\n\
  \t\t\t\t\t\tend\r\n\
  \t\t\t\t\tend\r\n\
  \t\t\t\tend\r\n\
  \t\t\tend\r\n\
  \t\t\r\n\
  \t\tif !_maljj.blank?\r\n\
  \t\t\ttransition_errors << \"Uno de los RUC #{_maljj.join(\",\")} del Autor de Dibujo no se encuentran en el sistema\"\r\n\
  \t\tend\r\n\
  \r\n\
  \t\tif !_buenjj.blank?\r\n\
  \t\t\t_duplijj = _buenj.detect{ |e| _buenjj.count(e) > 1}\r\n\
  \t\t\tif !_duplijj.blank?\r\n\
  \t\t\t\ttransition_errors << \"Una de los RUC de los Autores de Dibujo se ingres\xC3\xB3 m\xC3\xA1s de una vez\"\r\n\
  \t\t\tend\r\n\
  \t\tend"
views: 
back_step: Paso 2 - Datos del Autor (es) o Titular (es)
next_step: Paso 2 - Datos del Autor (es) o Titular (es)
position: 1
ajax_calls: "// DESABILITAR CAMPO TIPO DE SOCIEDAD CUANDO CAMPO TIPO DE DOCUMENTO ES DISTINTO DE RUC //\r\n\
  \r\n\
  $.each( $('[id*=field_tipo_de_documento_director_]'), function(index, campo) {\r\n \r\n if ($(campo).attr('id').match(/tipo_documento_mici_tipo_de_documento/)) {\r\n  $(campo).attr('onchange', 'evaluad(this.value,this.id);')\r\n }\r\n  });  \r\n\
  \r\n\
  function evaluad(director,idsociedad) {\r\n\
  \r\n var pos = idsociedad.match(/[\\d]/);\r\n var mod1 = \"#field_tipo_de_documento_director_instance_\";\r\n var mod2 = \"_tipo_documento_mici_tipo_de_documento\";\r\n var mod4 = \"_tipo_documento_mici_tipo_sociedad\";\r\n var mod5 = \"_tipo_documento_mici_no_documento\";\r\n  var mod3 = mod1.concat(pos);\r\n var tipo_s = mod3.concat(mod4);\r\n var tipo_d = mod3.concat(mod2);\r\n var num = mod3.concat(mod5);\r\n $(tipo_s).attr(\"disabled\",\"disabled\");\r\n        if (($(tipo_d).val() == 'C\xC3\xA9dula')||($(tipo_d).val() == 'Pasaporte')){\r\n      $(tipo_s).attr(\"disabled\",\"disabled\");\r\n\
  \t$(tipo_s).val('');\r\n\
  \t$(num).val('');\r\n  }  \r\n  else {\r\n      $(tipo_s).removeAttr(\"disabled\",\"disabled\");\r\n   $(tipo_s).val(''); \r\n   $(num).val('');\r\n  }\r\n\
  } \t\t\t\t\t   \r\n\
  \r\n\
  $.each( $('[id*=field_tipo_de_documento_autor_guion_]'), function(index, campo) {\r\n \r\n if ($(campo).attr('id').match(/tipo_documento_mici_tipo_de_documento/)) {\r\n  $(campo).attr('onchange', 'evaluag(this.value,this.id);')\r\n }\r\n\
  \r\n  });  \r\n\
  \r\n\
  function evaluag(autor,idsociedad) {\r\n\
  \r\n var pos = idsociedad.match(/[\\d]/);\r\n var mod1 = \"#field_tipo_de_documento_autor_guion_instance_\";\r\n var mod2 = \"_tipo_documento_mici_tipo_de_documento\";\r\n var mod4 = \"_tipo_documento_mici_tipo_sociedad\";\r\n var mod5 = \"_tipo_documento_mici_no_documento\";\r\n  var mod3 = mod1.concat(pos);\r\n var tipo_s = mod3.concat(mod4);\r\n var tipo_d = mod3.concat(mod2);\r\n var num = mod3.concat(mod5);\r\n $(tipo_s).attr(\"disabled\",\"disabled\");\r\n \r\n        if (($(tipo_d).val() == 'C\xC3\xA9dula')||($(tipo_d).val() == 'Pasaporte')){\r\n      $(tipo_s).attr(\"disabled\",\"disabled\");\r\n\
  \t$(tipo_s).val('');\r\n\
  \t$(num).val('');\r\n  }  \r\n  else {\r\n      $(tipo_s).removeAttr(\"disabled\",\"disabled\");\r\n   $(tipo_s).val(''); \r\n   $(num).val('');\r\n  }\r\n\
  }\r\n\
  \r\n\
  \r\n\
  $.each( $('[id*=field_tipo_de_documento_autor_musica_]'), function(index, campo) {\r\n \r\n if ($(campo).attr('id').match(/tipo_documento_mici_tipo_de_documento/)) {\r\n  $(campo).attr('onchange', 'evaluam(this.value,this.id);')\r\n }\r\n\
  \r\n  });  \r\n\
  \r\n\
  function evaluam(autor,idsociedad) {\r\n\
  \r\n var pos = idsociedad.match(/[\\d]/);\r\n var mod1 = \"#field_tipo_de_documento_autor_musica_instance_\";\r\n var mod2 = \"_tipo_documento_mici_tipo_de_documento\";\r\n var mod4 = \"_tipo_documento_mici_tipo_sociedad\";\r\n var mod5 = \"_tipo_documento_mici_no_documento\";\r\n  var mod3 = mod1.concat(pos);\r\n var tipo_s = mod3.concat(mod4);\r\n var tipo_d = mod3.concat(mod2);\r\n var num = mod3.concat(mod5);\r\n $(tipo_s).attr(\"disabled\",\"disabled\");\r\n        if (($(tipo_d).val() == 'C\xC3\xA9dula')||($(tipo_d).val() == 'Pasaporte')){\r\n      $(tipo_s).attr(\"disabled\",\"disabled\");\r\n\
  \t$(tipo_s).val('');\r\n\
  \t$(num).val('');\r\n  }  \r\n  else {\r\n      $(tipo_s).removeAttr(\"disabled\",\"disabled\");\r\n   $(tipo_s).val(''); \r\n   $(num).val('');\r\n  }\r\n\
  }\r\n\
  \r\n\
  $.each( $('[id*=field_tipo_de_documento_autor_dibujo_]'), function(index, campo) {\r\n \r\n if ($(campo).attr('id').match(/tipo_documento_mici_tipo_de_documento/)) {\r\n  $(campo).attr('onchange', 'evaluadi(this.value,this.id);')\r\n }\r\n\
  \r\n  });  \r\n\
  \r\n\
  function evaluadi(autor,idsociedad) {\r\n\
  \r\n var pos = idsociedad.match(/[\\d]/);\r\n var mod1 = \"#field_tipo_de_documento_autor_dibujo_instance_\";\r\n var mod2 = \"_tipo_documento_mici_tipo_de_documento\";\r\n var mod4 = \"_tipo_documento_mici_tipo_sociedad\";\r\n var mod5 = \"_tipo_documento_mici_no_documento\";\r\n  var mod3 = mod1.concat(pos);\r\n var tipo_s = mod3.concat(mod4);\r\n var tipo_d = mod3.concat(mod2);\r\n var num = mod3.concat(mod5);\r\n $(tipo_s).attr(\"disabled\",\"disabled\");\r\n        if (($(tipo_d).val() == 'C\xC3\xA9dula')||($(tipo_d).val() == 'Pasaporte')){\r\n      $(tipo_s).attr(\"disabled\",\"disabled\");\r\n\
  \t$(tipo_s).val('');\r\n\
  \t$(num).val('');\r\n  }  \r\n  else {\r\n      $(tipo_s).removeAttr(\"disabled\",\"disabled\");\r\n   $(tipo_s).val(''); \r\n   $(num).val('');\r\n  }\r\n\
  }"
