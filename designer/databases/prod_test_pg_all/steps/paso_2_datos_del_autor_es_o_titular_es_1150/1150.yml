--- 
id: 1150
name: Paso 2 - Datos del Autor (es) o Titular (es)
label: Datos del Autor (es) o Titular (es)
description: ""
fill_step_id: 574
created_at: 2013-03-13 17:34:55 Z
updated_at: 2014-04-29 16:15:00 Z
include: "{\"4311\":{\"3149\":{\"3605\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3162\":{\"3017\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3151\":{\"1981\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"528\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"529\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"530\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"537\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"926\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"545\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"546\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2983\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"3152\":{\"2979\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"2980\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3154\":{\"567\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"1282\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3342\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"3153\":{\"572\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"805\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"585\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"594\":{\"views\":\"default\",\"enabled\":\"enabled\"}}}}"
allowed_next_to_steps: ""
allowed_back_to_steps: ""
controls: ,back,next,close,close_and_save,save
on_becoming: ""
on_transition: "(1..5).each do |_num|\r\n\
  \r\n\
  #USADO PARA PRINT DESIGNS MT\r\n\
  \r\n\
  \t\t\t\tnombre2 = form_data.get(\"datos_del_autor_instance_#{_num}.datos_de_la_persona.primer_nombre\")\r\n\
  \t\t\t\tnombre3 = form_data.get(\"datos_del_autor_instance_#{_num}.datos_de_la_persona.segundo_nombre\")\r\n\
  \t\t\t\tnombre4 = form_data.get(\"datos_del_autor_instance_#{_num}.datos_de_la_persona.primer_apellido\")\r\n\
  \t\t\t\tnombre5 = form_data.get(\"datos_del_autor_instance_#{_num}.datos_de_la_persona.segundo_apellido\")\r\n\
  \t\t\t\tnombre6 = form_data.get(\"datos_del_autor_instance_#{_num}.datos_de_la_persona.apellido_de_casada\")\r\n\
  \t\t\t\t\r\n\
  \t\t\t\tnombre_completo = nombre2.to_s + \" \" + nombre3.to_s + \" \" + nombre4.to_s + \" \" + nombre5.to_s + \" \" + nombre6.to_s\r\n\
  \t\t\t\t\r\n\
  \t\t\t\tform_data.set(\"datos_del_autor_instance_#{_num}.datos_de_la_persona.nombre_completo\", nombre_completo)\r\n\
  \r\n\
  \t_defuncion = form_data.get(\"datos_del_autor_es_persona_natural_instance_#{_num}.datos_de_la_persona.fecha_de_defuncion\")\r\n\
  \tif (_defuncion.to_date > Date.today)\r\n\
  \t\ttransition_errors << \"La fecha de defunci\xC3\xB3n, no debe ser mayor a la fecha actual\"\r\n\
  \tend\r\n\
  end\r\n"
views: 
back_step: Paso 1 - Solicitud de datos del Autor (es) o Titular (es)
next_step: "Paso 3 - Datos de la Obra M\xC3\xBAsical"
position: 2
ajax_calls: "$(document).ready(function(){\r\n\
  $.each( $('[id*=datos_del_autor_]'), function(index, campo) {\r\n\
  \t\t\r\n\
  \tvar pos = (this.id).match(/_instance_[\\d][\\d]/);\r\n\
  \tif (pos == null){\r\n\
  \t  pos = (this.id).match(/_instance_[\\d]/);\r\n\
  \t}\r\n\
  \t//alert(pos);\r\n\
  \tvar mod1 = \"#field_datos_del_autor\";\r\n\
  \tvar mod2 = \"_tipo_de_identificacion_tipo_identificacion_texto\";\r\n\
  \tvar mod_c = \"_datos_de_la_persona_cedula_pasaporte\";\r\n\
  \tvar mod_r = \"_datos_de_la_empresa_ruc\";\r\n\
  \tvar mod_s = \"_seudonimo_indique_seudonimo\"\r\n \tvar mod3 = mod1.concat(pos);\r\n\
  \tvar dato = mod3.concat(mod2);\r\n\
  \tvar ced = mod3.concat(mod_c);\r\n\
  \tvar ruc =  mod3.concat(mod_r);\r\n\
  \tvar seu = mod3.concat(mod_s);\r\n\
  \t\r\n\
  \t/////////////////////////Datos a deshabilitar en persona natural ///////////////////////77\r\n\
  \r\n\
  \t\t\t\t\t\r\n\
  \tvar doc = \"_datos_de_la_persona_cedula_pasaporte\";\r\n\
  \tvar nom = \"_datos_de_la_persona_primer_nombre\";\r\n\
  \tvar nom2 = \"_datos_de_la_persona_segundo_nombre\";\r\n\
  \tvar nom3 = \"_datos_de_la_persona_primer_apellido\";\r\n\
  \tvar nom4 = \"_datos_de_la_persona_segundo_apellido\";\r\n\
  \tvar fec = \"_datos_de_la_persona_fecha_de_nacimiento_string\";\r\n\
  \tvar nac = \"_datos_de_la_persona_nacionalidad\";\r\n\
  \tvar tlf = \"_informacion_de_residencia_localizacion_numero_de_telefono\";\r\n\
  \tvar email = \"_informacion_de_residencia_localizacion_correo_electronico\";\r\n\
  \tvar documento = mod3.concat(doc);\r\n\
  \tvar nombre1 =  mod3.concat(nom);\r\n\
  \tvar nombre2 =  mod3.concat(nom2);\r\n\
  \tvar nombre3 =  mod3.concat(nom3);\r\n\
  \tvar nombre4 = mod3.concat(nom4);\r\n\
  \tvar fecha = mod3.concat(fec);\r\n\
  \tvar nacionalidad = mod3.concat(nac);\r\n\
  \tvar telefono = mod3.concat(tlf);\r\n\
  \tvar correo = mod3.concat(email);\r\n\
  \t\t\tif($(dato).val() == 'C\xC3\xA9dula' || $(dato).val() == 'Pasaporte'){ \r\n\
  \t\t\t\t\t\t\t$(ruc).parents(\".part-box\").hide();\r\n\
  \t\t\t}else {\r\n\
  \t\t\t\t\t\t\t$(ced).parents(\".part-box\").hide();\r\n\
  \t\t\t\t\t\t\t$(seu).parents(\".part-box\").hide();\r\n\
  \t\t\t\t\t\t\t$(telefono).parents(\".field-box\").hide();\r\n\
  \t\t\t\t\t\t\t$(correo).parents(\".field-box\").hide();\r\n\
  \t\t\t}\r\n\
  \t\t\t\r\n\
  \t\t//alert(dato);\r\n\
  \t\t\tif($(dato).val() == 'Pasaporte'){ \r\n\
  \t\t\t  $(documento).removeAttr(\"disabled\");\r\n\
  \t\t\t  $(nombre1).removeAttr(\"disabled\");\r\n\
  \t\t\t  $(nombre2).removeAttr(\"disabled\");\r\n\
  \t\t\t  $(nombre3).removeAttr(\"disabled\");\r\n\
  \t\t\t  $(nombre4).removeAttr(\"disabled\");\r\n\
  \t\t\t  $(fecha).removeAttr(\"disabled\");\r\n\
  \t\t\t  $(nacionalidad).removeAttr(\"disabled\");\r\n\
  \t\t\t}\t\t\r\n \r\n\
  \t$(dato).parents(\".section-box\").next().hide();\r\n\
  \r\n\
  \t\r\n\
  \t/////////////////////////VALIDACION SEUDONIMO//////////////////77\r\n\
  \t\t   \r\n\
  \tvar inicio = \"input[name='[field][datos_del_autor\";\r\n\
  \tvar fin = \"_seudonimo_seudonimo][]']\";\r\n\
  \tvar medio = inicio.concat(pos);\r\n\
  \tvar palabra = medio.concat(fin);\r\n\
  \tvar detal = \"_seudonimo_indique_seudonimo\";\r\n\
  \tvar detalle = mod3.concat(detal);\r\n\
  \t\r\n\
  \t//alert(palabra);\r\n\
  \t\r\n\
  \t\t   $(palabra).click(function(event){\r\n\
  \t\t\t$(this).each(function(){\r\n\
  \t\t\t\tif (this.checked) {\r\n\
  \t\t\t\t\tvar dato1 = $(this).val();\r\n\
  \t\t\t\t\t\r\n\
  \t\t\t\t\tif(dato1 == 'Seudonimo'){\r\n\
  \t\t\t\t\t    $(detalle).removeAttr(\"disabled\");\r\n\
  \t\t\t\t\t}\r\n\
  \t\t\t\t}\r\n\
  \t\t\t\t\tif (!this.checked) {\r\n\
  \t\t\t\t\t     var dato1 = $(this).val();\r\n\
  \t\t\t\t\t\t if(dato1 == 'Seudonimo'){\r\n\
  \t\t\t\t\t\t$(detalle).val('');\r\n\
  \t\t\t\t\t\t$(detalle).attr(\"disabled\",\"disabled\");\r\n\
  \t\t\t\t\t}\r\n\
  \t\t\t\t\t\r\n\
  \t\t\t\t}\r\n\
  \t\t\t\t\r\n\
  \t\t\t});\r\n\
  \t\t\t\r\n\
  \t\t   });\t\r\n\
  \t\r\n  });\r\n\
  });"
