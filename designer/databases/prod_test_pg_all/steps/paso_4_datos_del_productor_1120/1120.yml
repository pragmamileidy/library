--- 
id: 1120
name: Paso 4 - Datos del productor
label: Datos del Productor
description: ""
fill_step_id: 565
created_at: 2013-03-07 19:43:15 Z
updated_at: 2014-04-29 15:34:13 Z
include: "{\"2431\":{\"2620\":{\"1461\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"1981\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"528\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"529\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"530\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"537\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"926\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2621\":{\"572\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"805\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"585\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"594\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2706\":{\"2977\":{\"views\":\"default\",\"enabled\":\"enabled\"}}},\"2436\":{\"2628\":{\"567\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"566\":{\"views\":\"default\",\"enabled\":\"disabled\"},\"3342\":{\"views\":\"default\",\"enabled\":\"disabled\"}},\"2629\":{\"572\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"805\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"585\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"594\":{\"views\":\"default\",\"enabled\":\"enabled\"}},\"2707\":{\"2977\":{\"views\":\"default\",\"enabled\":\"enabled\"}}}}"
allowed_next_to_steps: ""
allowed_back_to_steps: ""
controls: ,back,next,back_steps,next_steps,close,close_and_save,save
on_becoming: ""
on_transition: |-
  #Usado para print design
  (1..5).each do |_num|
  
  primerNombre = form_data.get("datos_del_productor_persona_natural_instance_#{_num}.datos_de_la_persona.primer_nombre")
  primerapellido = form_data.get("datos_del_productor_persona_natural_instance_#{_num}.datos_de_la_persona.primer_apellido")
  segundoNombre = form_data.get("datos_del_productor_persona_natural_instance_#{_num}.datos_de_la_persona.segundo_nombre")
  segundoapellido = form_data.get("datos_del_productor_persona_natural_instance_#{_num}.datos_de_la_persona.segundo_apellido")
  apellidoCasada = form_data.get("datos_del_productor_persona_natural_instance_#{_num}.datos_de_la_persona.apellido_de_casada")
  
  _nombre =  "#{primerNombre} "+"#{segundoNombre} "+"#{primerapellido} "+"#{segundoapellido} "+"#{apellidoCasada}"
  form_data.set("datos_del_productor_persona_natural_instance_#{_num}.datos_de_la_persona.nombre_completo",_nombre)
  
  end
views: 
back_step: Paso 3 - Llenar datos del Productor
next_step: Paso 5 -  Participantes de la Obra
position: 4
ajax_calls: |
  $( function() {
  	
  		 $(document).ready(function(){
  		 
  			$.each( $('[id*=datos_del_productor_persona_natural_]'), function(index, campo) {
  		
  				var pos = (this.id).match(/_instance_[\d][\d]/);
  				if (pos == null){
  					pos = (this.id).match(/_instance_[\d]/);
  				}	
  	
  				var productor = "#field_datos_del_productor_persona_natural";
  				var productoj = "#field_datos_del_productor_persona_juridica";
  				var mod1 = productor.concat(pos);
  				var mod2 = productoj.concat(pos);
  	
  				var docs = "_datos_de_la_persona_tipo_documento_string";
  				var nom1 = "_datos_de_la_persona_primer_nombre";
  				var nom2 = "_datos_de_la_persona_segundo_nombre";
  				var ape1 = "_datos_de_la_persona_primer_apellido";
  				var ape2 = "_datos_de_la_persona_segundo_apellido";
  				var pais = "_datos_de_ubicacion_pais";
  				
  				var documento_p = mod1.concat(docs);
  				var nombre1_p = mod1.concat(nom1);
  				var nombre2_p = mod1.concat(nom2);
  				var apellido1_p = mod1.concat(ape1);
  				var apellido2_p = mod1.concat(ape2);
  				var pais_j = mod2.concat(pais);
  					
  						if($(documento_p).val() == 'Pasaporte'){
  							$(nombre1_p).removeAttr("disabled");
  							$(nombre2_p).removeAttr("disabled");
  							$(apellido1_p).removeAttr("disabled");
  							$(apellido2_p).removeAttr("disabled");
  						}
  	
  						if($(documento_p).val() == 'Cedula'){
  							$(pais_j).attr("disabled","disabled");
  						} 
  			});							
  		});
  	});
  	
  	$(document).ready(function(){
  	
  			$.each( $('[id*=datos_del_productor_persona_natural_]'), function(index, campo) {
  					
  				var pos = (this.id).match(/_instance_[\d][\d]/);
  				if (pos == null){
  				pos = (this.id).match(/_instance_[\d]/);
  				}
  				//alert(pos);
  				var mod1 = "#field_datos_del_productor_persona_natural";
  				var mod2 = "_datos_de_la_persona_tipo_documento_string";
  				var mod3 = mod1.concat(pos);
  				var dato = mod3.concat(mod2);
  			
  					//alert(dato);
  			
  				$(dato).parents(".section-box").next().hide()
  			
  			});		
  
  
  /////////////////////////////PersonA jURIDICA/////////////////////////////
  
  			$.each( $('[id*=datos_del_productor_persona_juridica_]'), function(index, campo) {
  					
  				var pos = (this.id).match(/_instance_[\d][\d]/);
  				if (pos == null){
  				pos = (this.id).match(/_instance_[\d]/);
  				}
  				//alert(pos);
  				var mod1 = "#field_datos_del_productor_persona_juridica";
  				var mod2 = "_datos_personales_ruc";
  				var mod3 = mod1.concat(pos);
  				var dato = mod3.concat(mod2);
  			
  					//alert(dato);
  			
  				$(dato).parents(".section-box").next().hide()
  			
  			});				
  	});
  
  ///ocultar secciones
  
  $(document).ready(function(){
  							
  			$.each( $('[id*=datos_del_productor_persona_natural_]'), function(index, campo) {
  		
  				var pos = (this.id).match(/_instance_[\d][\d]/);
  				if (pos == null){
  					pos = (this.id).match(/_instance_[\d]/);
  				}	
  	
  				var productor = "#field_datos_del_productor_persona_natural";
  				var mod1 = productor.concat(pos)
  				var docs = "_datos_de_la_persona_cedula_pasaporte";
  				var documento_d = mod1.concat(docs);
  
  						if($(documento_d).val()== ''){
  						
  							$(documento_d).parents(".section-box").hide()
  
  						}
  			});
  		
  
  			$.each( $('[id*=datos_del_productor_persona_juridica_]'), function(index, campo) {
  		
  				var pos = (this.id).match(/_instance_[\d][\d]/);
  				if (pos == null){
  					pos = (this.id).match(/_instance_[\d]/);
  				}	
  				
  				var productor = "#field_datos_del_productor_persona_juridica";
  				var mod1 = productor.concat(pos)
  	
  				var docs = "_datos_personales_ruc";
  				var documento_d = mod1.concat(docs);
  					
  						if($(documento_d).val() ==''){
  							$(documento_d).parents(".section-box").hide()
  						}
  			});
  		});
  		

