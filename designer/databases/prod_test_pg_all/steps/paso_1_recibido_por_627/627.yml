--- 
id: 627
name: Paso 1 - Recibido por
label: "Revisi\xC3\xB3n de la Solicitud"
description: "<br/>\r\n\
  En este formulario se presenta la informaci\xC3\xB3n de la solicitud y un espacio de observaciones para que el funcionario que recibe coloque las observaciones del tr\xC3\xA1mite.\r\n\
  <br/>\r\n\
  <style type=\"text/css\">\r\n\
  .panel-title {\r\n    padding-left: 6px;\r\n    margin-top: 0px;\r\n    margin-bottom: 0px;\r\n\
  }\r\n\
  .panel-controls2 {\r\n    float: right;\r\n    display: block;\r\n    cursor: pointer;\r\n\
  \tpadding-right: 10px;\r\n\
  }\r\n\
  .panel-controls2 > a {\r\n    padding-top: 1px;\r\n    display: inline-block;\r\n    opacity: 0.7;\r\n    width: 30px;\r\n    color: #999;\r\n    font-size: 14px;\r\n    font-weight: normal;\r\n    text-align: center;\r\n\
  \t -webkit-border-radius: 3;\r\n  -moz-border-radius: 3;\r\n  border-radius: 3px;\r\n  border:1px solid #999;\r\n margin-bottom:5px !important; \r\n    padding-left: 12px;\r\n\
  }\r\n\
  .full-screen-preview {\r\n    height: 100%;\r\n    padding: 0px;\r\n    margin: 0px;\r\n    overflow: hidden;\r\n\
  }\r\n\
  .panel-fullscreen {\r\n    display: block !important;\r\n    z-index: 9999 !important;\r\n    position: fixed !important;\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n    top: 0px !important;\r\n    right: 0px !important;\r\n    left: 0px !important;\r\n    bottom: 0px !important;\r\n\
  \tmargin:0px !important;\r\n\
  \tbackground:#FFF;\r\n\
  \toverflow:scroll !important;\r\n\
  }\r\n\
  \r\n\
  .only_view_label {\r\n\
  \tfont-size:12px; !importante\r\n\
  \t}\r\n\
  .part-box.colapsado{\r\n\
  \tbackground: #F3F3F3; !important;\r\n\
  \tborder:1px solid #E5E5E5;-moz-border-radius:6px;\r\n\
  \tborder-radius:6px;\r\n\
  \t//padding-top:0px;\r\n\
  \tpadding-bottom:10px;\r\n\
  \t}\r\n\
  .section-box.colapsado{\r\n\
  \tbackground: #FBFBFB; !important;\r\n\
  \tborder:2px dotted #999;\r\n\
  \t-moz-border-radius:6px;\r\n\
  \tborder-radius:6px;\r\n\
  \t//padding-top:0px;\r\n\
  \tpadding-bottom:10px;\r\n\
  }\r\n\
  .colapsado.error{\r\n\
  \tbackground:#FFF0F0;\r\n\
  }\r\n\
  .part-box .label2 .panel-title{\r\n\
  \twidth: 90%;\r\n    font-variant:normal;\r\n\
  \tfont-weight:bold;\r\n\
  \tfont-size: 1.45em;\r\n\
  \tpadding-left:10px;\r\n\
  \tpadding-bottom:10px;\r\n\
  \t\r\n\
  }\r\n\
  .section-box .label2 .panel-title{\r\n\
  \twidth: 90%;\r\n    font-variant:normal;\r\n\
  \tfont-weight:bold;\r\n\
  \tfont-size: 1.45em;\r\n\
  \tpadding-left:10px;\r\n\
  \tpadding-bottom:10px;\r\n\
  \t\r\n\
  }\r\n\
  a.nounderline:link   \r\n\
  {   \r\n text-decoration:none;   \r\n\
  }   \r\n\
  .btnE {\r\n  -webkit-border-radius: 3;\r\n  -moz-border-radius: 3;\r\n  border-radius: 3px;\r\n  border:1px solid #999;\r\n  font-family: Arial;\r\n  color: #ffffff;\r\n  font-size: 18px;\r\n  background: lightgray;\r\n  padding-left:7px;\r\n  padding-right:7px;\r\n  padding-top:0px;\r\n  padding-bottom:0px;\r\n  text-decoration: none; !important;\r\n \r\n\
  }\r\n\
  \r\n\
  .btnE:hover {\r\n  background: #afb4b8;\r\n  text-decoration: none;\r\n\
  }\r\n\
  /* controls */\r\n\
  .panel-controls {\r\n\
  }\r\n\
  \r\n\
  \r\n\
  .panel-control-collapse{\r\n\
  }\r\n\
  \r\n\
  </style>\r\n\
  <script type=\"text/javascript\">\r\n\
  $(document).ready(function(){\r\n\
  \t/**  VDIAZ **/\t\t\t\t\t\t   \r\n\
  \t/*   Aplica la  presentaci\xC3\xB3n de paneles colapsables para secciones y partes*/\r\n\
  \t/*   Gestion de */\r\n\
  \t/**  Version Betta**/\r\n\
  \t\r\n\
  \t// Indicar los ids de las secciones que se desean presentar expandidas\r\n\
  \tvar seccionArr = [\"recibido_por\"];\r\n\
  \r\n\
  \t// Indicar los ids de las partes que se desean presentar expandidas\r\n\
  \tvar parteArr = [\"datos_del_funcionario_generico\"];\r\n\
  \r\n\
  \t// Indicar SI o NO se desea presentar las secciones contraidas\r\n\
  \tvar seccionContraido = \"NO\";\r\n\
  \t\r\n\
  \t// Indicar SI o NO se desea presentar las partes contraidas\r\n\
  \tvar parteContraido = \"NO\";\r\n\
  \t\r\n\
  \t\r\n\
  \t//Inicia logica para aplicar el control de contraer/extender\r\n\
  \tvar labels = document.querySelectorAll(\".label\");\r\n\
  \t\r\n\
  \tfor(i=0; i<labels.length; i++){\r\n\
  \t\tvar l = labels[i].innerHTML;\r\n\
  \t\tvar c=labels[i].parentElement; \t\r\n\
  \t\tvar ocultar=\"\";\r\n\
  \t\tvar clase=\"\";\r\n\
  \t\tvar icono = \"<span class='ui-icon ui-icon-plusthick'></span>\";\t\t\r\n\
  \t\tvar newhtml =\"\";\t\r\n\
  \t\tvar obj = \"\";\r\n\
  \t\tvar arrobj=\"\";\r\n\
  \t\tif (c.className.trim().indexOf(\"section-box\") > -1){\r\n\
  \t\t\tobj = seccionContraido;\r\n\
  \t\t\tarrobj =  seccionArr;\r\n\
  \t\t}else{\r\n\
  \t\t\tobj = parteContraido;\r\n\
  \t\t\tarrobj =  parteArr;\r\n\
  \r\n\
  \t\t}\r\n\
  \t\tif ( obj == \"SI\"){\r\n\
  \t\t\t\ticono =  \"<span class='ui-icon ui-icon-plusthick'></span>\";\r\n\
  \t\t\t\tclase = \" colapsado\";\r\n\
  \t\t\t\tocultar = \"none\";\r\n\
  \t\t}else{\r\n\
  \t\t\t\ticono =\"<span class='ui-icon ui-icon-minusthick'></span>\";\r\n\
  \t\t\t\tclase = \"\";\r\n\
  \t\t\t\tocultar = \"\";\r\n\
  \t\t}\r\n\
  \t\tif (jQuery.inArray( c.id.trim(), arrobj ) != -1){\r\n\
  \t\t\t\ticono = \"<span class='ui-icon ui-icon-minusthick'></span>\";\r\n\
  \t\t\t\tclase = \"\";\r\n\
  \t\t\t\tocultar = \"\";\r\n\
  \t\t}\r\n\
  \t\t\r\n\
  \r\n\
  \t\tnewhtml = \"<span class='panel-title'>\"+\r\n\
  \t\tl+\"</span><span class='panel-controls2'> \"+\r\n\
  \t\t//\"<a href='#col\"+i+\"' class='panel-control-collapse btnE nounderline'>\"+icono+\"</a>\"+\r\n\
  \t\t\"<a href='#col\"+i+\"' class='panel-control-collapse'>\"+icono+\"</a>\"+\r\n\
  \t\t\"<a href='#col\"+i+\"' class='panel-control-fullscreen2 nounderline'><span class='ui-icon ui-icon-arrowthick-1-ne'></span></a>\"+\r\n\
  \t\t\"</span>\";\r\n\
  \t\tlabels[i].innerHTML = newhtml;\r\n\
  \t\tlabels[i].className = \"label2\";\r\n\
  \t\tlabels[i].nextSibling.style.display = ocultar;\r\n\
  \t\tlabels[i].parentElement.className += clase;\r\n\
  \t}\r\n\
  \r\n\
  \t/*  Expande o contrae el panel*/\r\n\
  \t$(\".panel-control-collapse\").click(function(){\r\n\
  \t\t\r\n\
  \t\tvar e = $(this);\r\n\
  \t\tif ( e.html().indexOf(\"ui-icon-minusthick\") > -1 ){\r\n\
  \t\t\tconsole.log(\"Validando error\");\r\n\
  \t\t\te.html(\"<span class='ui-icon ui-icon-plusthick'></span>\");\t\r\n\
  \t\t\te.parent().parent().next().hide();\r\n\
  \t\t\te.parent().parent().parent().addClass(\" colapsado\");\r\n\
  \t\t\t//console.log(\"Numero de errores: \" + e.parent().parent().parent().find( \".error\" ).length);\r\n\
  \t\t\tif (e.parent().parent().parent().find( \".field-errorx\" ).length > 0){\r\n\
  \t\t\t\te.parent().parent().parent().addClass(\" error\");\r\n\
  \t\t\t\t\r\n\
  \t\t\t}\r\n\
  \t\t}else{\r\n\
  \t\t\te.html(\"<span class='ui-icon ui-icon-minusthick'></span>\");\t\t\t\r\n\
  \t\t\te.parent().parent().next().show();\r\n\
  \t\t\te.parent().parent().parent().removeClass('colapsado');\r\n\
  \t\t\te.parent().parent().parent().removeClass('error');\r\n\
  \t\t}\r\n\
  \t\te.focus();\r\n\
  \t});\r\n\
  \t\r\n\
  \t//AQUI\r\n\
  \t/*  Maximiza o minimiza el panel*/\r\n\
  \t$(\".panel-control-fullscreen2\").click(function(){\t\t\r\n\
  \t\tvar e = $(this);\r\n\
  \t\tif ( e.html().indexOf(\"ui-icon-arrowthick-1-ne\") > -1 ){\r\n\
  \t\t\te.html(\"<span class='ui-icon ui-icon-arrowthick-1-sw'></span>\");\t\r\n\
  \t\t\t$('body').removeClass(\"full-screen-preview\");\r\n\
  \t\t\t$('body').addClass(\"full-screen-preview\");\r\n\
  \t\t\t$('.panel-fullscreen').removeClass(\"panel-fullscreen\");\t\t\t\r\n\
  \t\t\te.parent().parent().parent().addClass(\"panel-fullscreen\");\r\n\
  \t\t}else{\t\r\n\
  \t\t\t$('body').removeClass(\"full-screen-preview\");\r\n\
  \t\t\t$('.panel-fullscreen').removeClass(\"panel-fullscreen\");\r\n\
  \t\t\t$('.ui-icon-arrowthick-1-sw').removeClass(\"ui-icon-arrowthick-1-sw\").addClass(\"icon-arrowthick-1-ne\");\r\n\
  \t\t\te.html(\"<span class='ui-icon ui-icon-arrowthick-1-ne'></span>\");\r\n\
  \t\t}\r\n\
  \t\te.focus();\r\n\
  \t});\r\n\
  \r\n\
  \t/*  Expande los paneles cuando se realiza el submit esto es porque  s\xC3\xB3lo se validan los campos no ocultos*/\r\n\
  \t$('input[value=\"Guardar y Cerrar\"],input[value=\"Guardar\"],input[value=\"Enviar Formulario\"],input[value=\"Pr\xC3\xB3ximo\"],input[value=\"Anterior\"]').click(function(){\r\n\
  \t    console.log('Guardar y Cerrar');\t\r\n\
  \t\t$( \".colapsado, .section-box\" ).children( \".section-body\" ).show();\r\n\
  \t\t$( \".colapsado, .part-box\" ).children( \".part-body\" ).show();\r\n\
  \t\t$( \".colapsado, .part-box\" ).removeClass('colapsado');\r\n\
  \t\t$( \".colapsado, .part-box\" ).removeClass('error');\r\n\
  \t\t$( \".colapsado, .section-box\" ).removeClass('error');\r\n\
  \t\t$( \".panel-control-collapse.nounderline\").html(\"<span class='ui-icon ui-icon-minusthick'></span>\"); \r\n \t    console.log('Guardar y Cerrar');\t\r\n\
  \t});\r\n\
  \t\r\n\
  });\r\n\
  </script>"
fill_step_id: 322
created_at: 2012-06-19 00:29:39 Z
updated_at: 2015-12-14 16:27:27.520404 Z
include: "{\"1295\":{\"1780\":{\"1612\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1500\":{\"1811\":{\"1688\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1282\":{\"1791\":{\"1983\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1657\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1658\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1659\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1660\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1661\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1283\":{\"1791\":{\"1655\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1656\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1501\":{\"1811\":{\"1881\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1284\":{\"1791\":{\"1983\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1657\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1658\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1659\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1660\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1661\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1285\":{\"1791\":{\"1655\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1656\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1279\":{\"674\":{\"782\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"124\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"783\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"126\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"939\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"940\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"2055\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"947\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"948\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1100\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1465\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1362\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1386\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1387\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1281\":{\"1791\":{\"3116\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1983\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1656\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1289\":{\"1791\":{\"3116\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1655\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1656\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1352\":{\"1823\":{\"1706\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1707\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1341\":{\"1812\":{\"1689\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"2068\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"2069\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"2070\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1690\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1694\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}},\"2794\":{\"3210\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"3211\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"3212\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"3213\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"3214\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"3215\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}},\"1813\":{\"2456\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"2457\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"2458\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"583\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"805\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1342\":{\"1814\":{\"2071\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"2072\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1696\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1697\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}},\"2795\":{\"3216\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"3217\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"3218\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"3219\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}},\"1815\":{\"2456\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"2457\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"2458\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"583\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"805\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1405\":{\"1864\":{\"1764\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1765\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}},\"1867\":{\"1764\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1765\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}},\"1868\":{\"1764\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1765\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}},\"1869\":{\"1764\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1765\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}},\"1870\":{\"1764\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1765\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}},\"1871\":{\"1764\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1765\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}},\"3045\":{\"210\":{\"views\":\"only_view\",\"enabled\":\"disabled\"}}},\"1354\":{\"1710\":{\"1401\":{\"views\":\"only_view\",\"enabled\":\"disabled\"},\"1402\":{\"views\":\"default\",\"enabled\":\"enabled\"},\"1403\":{\"views\":\"default\",\"enabled\":\"enabled\"}}}}"
allowed_next_to_steps: ""
allowed_back_to_steps: ""
controls: ,close,close_and_save,save,submit
on_becoming: |
  # Inicializacion de datos del agente - LG
  
  _idagente = @task["agent_id"].to_s
  
  result = WebserviceConsumer.get( '/preconfigured_services/get_user_info.xml?agent_id=' + "#{_idagente}" + '&include_all=true').parsed_response
  _hash = result["hash"]
  _agente = _hash["response"]
  
  
  form_data.set("recibido_por.datos_del_funcionario_generico.usuario", _agente["name"])

on_transition: "#::::::::Implementaci\xC3\xB3n de Grabatraspaso::::::::::::::::::# \r\n\
  evaluacion = form_data.get(\"recibido_por.datos_del_funcionario_generico.evaluacion\")\r\n\
  if evaluacion == \"OK\"\r\n\
  #::::::Tipo de documento de los participantes del proceso de traspaso:::::#\r\n\
  \ttipoDocPre = form_data.get(\"tipo_de_documento_contraparte.tipo_de_documento.tipo_de_documento\")\r\n\
  \tplacaUri = form_data.get(\"datos_del_vehiculo.datos_de_vehiculo.placa\")\r\n\
  \tplaca = URI.escape(\"#{placaUri}\")\r\n\
  #:::: Obtener los valores del pago:::::::#\r\n\
  \tslipPagoBancoUri = form_data.get(\"datos_de_pago.datos_de_pago.numero_de_recibo_deposito\")\r\n\
  \tslipPagoBanco = URI.escape(\"#{slipPagoBancoUri}\")\r\n\
  \tfechaPagoSlipUri = form_data.get(\"datos_de_pago.datos_de_pago.fecha_del_pago\")\r\n\
  \tfechaPagoSlip = URI.escape(\"#{fechaPagoSlipUri}\")\r\n\
  \tentidadDePagoUri = form_data.get(\"datos_del_evaluador_generico.entidad_evaluadora_0.nombre_de_la_entidad\")\r\n\
  \tentidadDePago = URI.escape(\"#{entidadDePagoUri}\")\r\n\
  \tsucursalDePagoUri = form_data.get(\"datos_de_pago.datos_de_pago.banco_attt\")\r\n\
  \tsucursalDePago = URI.escape(\"#{sucursalDePagoUri}\")\r\n\
  #::::::::Otros datos:::::::::::#\r\n\
  \ttipoTramite = 02\r\n\
  \tnumeroNuevaPoliza = URI.escape(\"\")\t\r\n\
  \tcodigoNuevaAseguradora = URI.escape(\"\")\t\t\r\n\
  \tasgCodigo = URI.escape(\"\")\r\n\
  \tsolTipoReferencia = \"PL\"\r\n\
  \tsolValorReferenciaUri = form_data.get(\"datos_del_vehiculo.datos_de_vehiculo.placa\")\r\n\
  \tsolValorReferencia = URI.escape(\"#{solValorReferenciaUri}\")\t\r\n\
  \tsolDistribuidoraAutorizada = URI.escape(\"\")\t\r\n\
  #::::::Datos del solicitante:::::::#\t\r\n\
  \tsolTipoDocSolicitanteUri = form_data.get(\"datos_del_solicitante_persona_natural.nombres_completos.tipo_de_identificacion\")\r\n\
  \tsolTipoDocSolicitante = URI.escape(\"#{solTipoDocSolicitanteUri}\")\r\n\
  \tsolNumeroDocSolicitanteUri = form_data.get(\"datos_del_solicitante_persona_natural.nombres_completos.cedula_pasaporte\")\r\n\
  \tsolNumeroDocSolicitante = URI.escape(\"#{solNumeroDocSolicitanteUri}\")\r\n\
  \tsolTipoSolicitanteUri = form_data.get(\"tipo_de_solicitante.tipo_de_solicitante.tipo_de_solicitante\")\r\n\
  \tsolTipoSolicitante = URI.escape(\"#{solTipoSolicitanteUri}\")\t\r\n\
  #:::::::Variables para concatenar el nombre completo del solicitante::::::::#\r\n\
  \tPrimerNombreSUri = form_data.get(\"datos_del_solicitante_persona_natural.nombres_completos.primer_nombre\")\r\n\
  \tPrimerNombreS = URI.escape(\"#{PrimerNombreSUri}\") \r\n\
  \tSegundoNombreSUri = form_data.get(\"datos_del_solicitante_persona_natural.nombres_completos.segundo_nombre\")\r\n\
  \tSegundoNombreS = URI.escape(\"#{SegundoNombreSUri}\")\r\n\
  \tPrimerApellidoSUri = form_data.get(\"datos_del_solicitante_persona_natural.nombres_completos.primer_apellido\")\r\n\
  \tPrimerApellidoS = URI.escape(\"#{PrimerApellidoSUri}\")\r\n\
  \tSegundoApellidoSUri = form_data.get(\"datos_del_solicitante_persona_natural.nombres_completos.segundo_apellido\")\r\n\
  \tSegundoApellidoS = URI.escape(\"#{SegundoApellidoSUri}\")\r\n\
  \tApellidoCasadaSUri = form_data.get(\"datos_del_solicitante_persona_natural.nombres_completos.apellido_de_casada\")\r\n\
  \tApellidoCasadaS = URI.escape(\"#{ApellidoCasadaSUri}\")\r\n\
  \tsolNombreSolicitanteS = \"#{PrimerNombreS} #{SegundoNombreS} #{PrimerApellidoS} #{SegundoApellidoS} #{ApellidoCasadaS}\"\r\n\
  \tsolNombreSolicitante = URI.escape(\"#{solNombreSolicitanteS}\")\r\n\
  \tif solTipoSolicitante != \"Adquiriente\"\r\n\
  \t\tnroDocS = form_data.get(\"datos_del_solicitante_persona_natural.nombres_completos.cedula_pasaporte\")\r\n\
  \t\tresult = WebserviceConsumer.get('/service/bdin_tribunal_electoral/find.json?cedula=' + \"#{nroDocS}\").parsed_response\r\n\
  \t\tdatos = result[\"response\"]\r\n\
  \t\tsolDomicilioSolicitanteUri = datos[\"direccionCompleta\"]\r\n\
  \t\tsolDomicilioSolicitante = URI.escape(\"#{solDomicilioSolicitanteUri}\")\r\n\
  \telse\r\n\
  \t\tsolDomicilioSolicitanteUri = form_data.get(\"datos_adicionales_adquiriente_natural.direccion.direccion\")\r\n\
  \t\tsolDomicilioSolicitante = URI.escape(\"#{solDomicilioSolicitanteUri}\")\r\n\
  \tend\t\t\t\t\r\n\
  \tnomCorregimiento = form_data.get(\"datos_adicionales_adquiriente_natural.direccion.corregimiento_lista\")\r\n\
  \tres = URI.escape(\"#{nomCorregimiento}\")\r\n\
  \tif !res.blank?\r\n\
  \t\tresult = WebserviceConsumer.get( '/service/ws_panama_corregimientos/find.json?corregimiento=' + \"#{res}\").parsed_response\r\n\
  \t\tdatoUbic = result[\"response\"]\r\n\
  \t\tif datoUbic.blank?\r\n\
  \t\t\ttransition_errors << \"el servicio no responde\"\r\n\
  \t\telse\r\n\
  \t\t\tcodProvincia = datoUbic[\"codprv\"]\r\n\
  \t\t\tcodDistrito = datoUbic[\"coddis\"]\r\n\
  \t\t\tcodCorregimiento = datoUbic[\"codcor\"]\r\n\
  \t\t\tsolDivGeograficaDomicilio = \"PV\"\r\n\
  \t\t\tubicacionGeograficaDomicilio = \"#{codProvincia}#{codDistrito}#{codCorregimiento}\" #::::Ubicaci\xC3\xB3n geogr\xC3\xA1fica del domicilio sin espacio entre cada d\xC3\xADgitos::::#\t\r\n\
  \t\t\tsolUbiGeograficaDomicilio = URI.escape(\"#{ubicacionGeograficaDomicilio}\")\t\t\r\n\
  \t\t\tsolDivGeograficaVehiculo = \"PV\"\t\t\t\t\t\t\t\t\r\n\
  \t\t\tplacaUbi = form_data.get(\"datos_del_vehiculo.datos_de_vehiculo.placa\")\t\t\r\n\
  \t\t\tif !placaUbi.blank?\t\r\n\
  \t\t\t\tresult = WebserviceConsumer.get('/service/bdin_attt_vehiculo_consulta_vehiculo_por_placa/find.json?placa=' + \"#{placaUbi}\").parsed_response\r\n\
  \t\t\t\tubicVehiculo = result[\"response\"]\t\t\t\t\t\t\t\r\n\
  \t\t\t \tubicacionGeograficaVehiculo = ubicVehiculo[\"domiciliado_municipio\"] \r\n\
  \t\t\t\tsolUbiGeograficaVehiculo = URI.escape(\"#{ubicacionGeograficaVehiculo}\") #::::Ubicaci\xC3\xB3n geogr\xC3\xA1fica del veh\xC3\xADculo::::#\r\n\
  \t\t\tend\r\n\
  \t\tend\r\n\
  \telse \r\n\
  \t\ttransition_errors << \"El corregimiento est\xC3\xA1 vac\xC3\xADo\"\r\n\
  \tend\r\n\
  #:::::::Obtener los datos del Nuevo Propietario (Adquiriente)::::::#\r\n\
  \tsolTipoPresentador = \"Adquiriente\"\r\n\
  \tsolTipoDocPresentadorUri = form_data.get(\"datos_del_solicitante_persona_natural.nombres_completos.tipo_de_identificacion\")\r\n\
  \tif (solTipoDocPresentadorUri == \"C\xC3\xA9dula\" || solTipoDocPresentadorUri == \"Pasaporte\")\r\n\
  \t\tsolTipoDocPres = (solTipoDocPresentadorUri == \"C\xC3\xA9dula\") ? \"CIP\" : \"PAS\"\r\n\
  \t\tsolTipoDocPresentador = URI.escape(\"#{solTipoDocPres}\")\r\n\
  \t\tsolNumeroDocPresentadorUri = form_data.get(\"datos_del_solicitante_persona_natural.nombres_completos.cedula_pasaporte\")\r\n\
  \t\tsolNumeroDocPresentador = URI.escape(\"#{solNumeroDocPresentadorUri}\") \r\n\
  \t\tsolNombrePresentadorUri = form_data.get(\"datos_del_solicitante_persona_natural.nombres_completos.nombre\")\r\n\
  \t\tsolNombrePresentador = URI.escape(\"#{solNombrePresentadorUri}\")\r\n\
  \t\tproTipoPersona = \"PN\"\r\n\
  \t\tproPrimerNombreUri = form_data.get(\"datos_del_propietario_del_vehiculo_persona_natural.nombres_completos.primer_nombre\")\r\n\
  \t\tproPrimerNombre = URI.escape(\"#{proPrimerNombreUri}\")\r\n\
  \t\tproSegundoNombreUri = form_data.get(\"datos_del_propietario_del_vehiculo_persona_natural.nombres_completos.segundo_nombre\")\r\n\
  \t\tproSegundoNombre = URI.escape(\"#{proSegundoNombreUri}\")\r\n\
  \t\tproApellidoPaternoUri = form_data.get(\"datos_del_propietario_del_vehiculo_persona_natural.nombres_completos.primer_apellido\")\r\n\
  \t\tproApellidoPaterno = URI.escape(\"#{proApellidoPaternoUri}\")\r\n\
  \t\tproApellidoMaternoUri = form_data.get(\"datos_del_propietario_del_vehiculo_persona_natural.nombres_completos.segundo_apellido\")\r\n\
  \t\tproApellidoMaterno = URI.escape(\"#{proApellidoMaternoUri}\")\r\n\
  \t\tproApellidoCasadaUri = form_data.get(\"datos_del_propietario_del_vehiculo_persona_natural.nombres_completos.apellido_de_casada\")\r\n\
  \t\tproApellidoCasada = URI.escape(\"#{proApellidoCasadaUri}\")\r\n\
  \t\tproDivisionGeografica = URI.escape(\"\")\r\n\
  \t\tproUbicacionGeografica = URI.escape(\"#{ubicacionGeograficaDomicilio}\") \r\n\
  \t\tproNacionalidadUri = form_data.get(\"datos_adicionales_adquiriente_natural.datos_adicionales.nacionalidad\")\r\n\
  \t\tproNacionalidad = URI.escape(\"#{proNacionalidadUri}\")\r\n\
  \t\tproPaisNacimientoUri = form_data.get(\"datos_adicionales_adquiriente_natural.datos_adicionales.pais_de_nacimiento\")\r\n\
  \t\tproPaisNacimiento = URI.escape(\"#{proPaisNacimientoUri}\")\r\n\
  \t\tproTelefonoPersonalUri = form_data.get(\"datos_adicionales_adquiriente_natural.datos_adicionales.telefono\")\r\n\
  \t\tproTelefonoPersonal = URI.escape(\"#{proTelefonoPersonalUri}\")\r\n\
  \t\tproTelefonoLaboralUri = form_data.get(\"datos_adicionales_adquiriente_natural.datos_adicionales.telefono_laboral\")\r\n\
  \t\tproTelefonoLaboral = URI.escape(\"#{proTelefonoLaboralUri}\")\r\n\
  \t\tproDomicilioUri = form_data.get(\"datos_adicionales_adquiriente_natural.direccion.direccion\")\r\n\
  \t\tproDomicilio = URI.escape(\"#{proDomicilioUri}\")\r\n\
  \t\tproSexoUri = form_data.get(\"datos_adicionales_adquiriente_natural.datos_adicionales.sexo\")\r\n\
  \t\tproSexo = URI.escape(\"#{proSexoUri}\")\r\n\
  \t\tproFechaNacConstitucionUri = form_data.get(\"datos_adicionales_adquiriente_natural.datos_adicionales.fecha_de_nacimiento\")\r\n\
  \t\tproFechaNacConstitucion = URI.escape(\"#{proFechaNacConstitucionUri}\")\r\n\
  \t\tproTipoDocRepLegal = URI.escape(\"\")\r\n\
  \t\tproNumeroDocRepLegal = URI.escape(\"\")\r\n\
  \t\tproNombreRepLegal = URI.escape(\"\")\r\n\
  \t\tproVigenciaRepLegal = URI.escape(\"\")\r\n\
  \t\tproCorreoElectronico = URI.escape(\"\")\r\n\
  \t\tproTelefonoMovil = URI.escape(\"\")\r\n\
  \t\tproNombreRazonSocial = URI.escape(\"\")\r\n\
  \tend\r\n\
  #:::::::::Setear las variables en el servicio \"bdin_attt_graba_traspaso_psp\"::::::::::::::::#\r\n\
  \tresult = WebserviceConsumer.get('/service/bdin_attt_graba_traspaso_psp/find.json?placa=' + \"#{placa}\" + '&slipPagoBanco=' + \"#{slipPagoBanco}\" + '&fechaPagoSlip=' + \"#{fechaPagoSlip}\" + '&entidadDePago=' + \"#{entidadDePago}\" + '&sucursalDePago=' + \"#{sucursalDePago}\" + '&tipoTramite=' + \"#{tipoTramite}\" + '&numeroNuevaPoliza=' + \"#{numeroNuevaPoliza}\" + '&codigoNuevaAseguradora=' + \"#{codigoNuevaAseguradora}\" + '&asgCodigo=' + \"#{asgCodigo}\" + '&solTipoReferencia=' + \"#{solTipoReferencia}\" + '&solValorReferencia=' + \"#{solValorReferencia}\" + '&solTipoSolicitante=' + \"#{solTipoSolicitante}\" + '&solDistribuidoraAutorizada=' + \"#{solDistribuidoraAutorizada}\" + '&solTipoDocSolicitante=' + \"#{solTipoDocSolicitante}\" + '&solNumeroDocSolicitante=' + \"#{solNumeroDocSolicitante}\" + '&solNombreSolicitante=' + \"#{solNombreSolicitante}\" + '&solDomicilioSolicitante=' + \"#{solDomicilioSolicitante}\" + '&solDivGeograficaDomicilio=' + \"#{solDivGeograficaDomicilio}\" + '&solUbiGeograficaDomicilio=' + \"#{solUbiGeograficaDomicilio}\" + '&solDivGeograficaVehiculo=' + \"#{solDivGeograficaVehiculo}\" + '&solUbiGeograficaVehiculo=' + \"#{solUbiGeograficaVehiculo}\" + '&solTipoPresentador=' + \"#{solTipoPresentador}\" + '&solTipoDocPresentador=' + \"#{solTipoDocPresentador}\" + '&solNumeroDocPresentador=' + \"#{solNumeroDocPresentador}\" +'&solNombrePresentador=' + \"#{solNombrePresentador}\" + '&proTipoPersona=' + \"#{proTipoPersona}\" + '&proNombreRazonSocial=' + \"#{proNombreRazonSocial}\" + '&proSegundoNombre=' + \"#{proSegundoNombre}\" + '&proApellidoPaterno=' + \"#{proApellidoPaterno}\" + '&proApellidoMaterno=' + \"#{proApellidoMaterno}\" + '&proApellidoCasada=' + \"#{proApellidoCasada}\" + '&proDivisionGeografica=' + \"#{proDivisionGeografica}\" + '&proUbicacionGeografica=' + \"#{proUbicacionGeografica}\" + '&proNacionalidad=' + \"#{proNacionalidad}\" + '&proPaisNacimiento=' + \"#{proPaisNacimiento}\" + '&proTelefonoPersonal=' + \"#{proTelefonoPersonal}\" + '&proTelefonoLaboral=' + \"#{proTelefonoLaboral}\" + '&proSexo=' + \"#{proSexo}\" + '&proDomicilio=' + \"#{proDomicilio}\" + '&proFechaNacConstitucion=' + \"#{proFechaNacConstitucion}\" + '&proTipoDocRepLegal=' + \"#{proTipoDocRepLegal}\" + '&proNumeroDocRepLegal=' + \"#{proNumeroDocRepLegal}\" + '&proNombreRepLegal=' + \"#{proNombreRepLegal}\" + '&proVigenciaRepLegal=' + \"#{proVigenciaRepLegal}\" + '&proCorreoElectronico=' + \"#{proCorreoElectronico}\" + '&proTelefonoMovil=' + \"#{proTelefonoMovil}\").parsed_response\r\n\
  end\r\n\
  \r\n\
  #::::::::Validaciones para obtener Reparo/Rechazo::::::::::::::::::::#\r\n\
  _obs = form_data.get(\"recibido_por.datos_del_funcionario_generico.observaciones\")\r\n\
  _eval = form_data.get(\"recibido_por.datos_del_funcionario_generico.evaluacion\")\r\n\
  if (_eval ==\"REPARO\" && _obs.blank?) \r\n   transition_errors << \"Debe indicar el motivo del reparo en el campo (Observaci\xC3\xB3n).\"\r\n\
  end\r\n\
  if (_eval ==\"RECHAZO\" && _obs.blank?) \r\n   transition_errors << \"Debe indicar el motivo del rechazo en el campo (Observaci\xC3\xB3n).\"\r\n\
  end\r\n\
  \r\n"
views: 
back_step: ""
next_step: ""
position: 0
ajax_calls: ""
